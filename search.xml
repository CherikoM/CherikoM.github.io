<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>这是本站点的第一个页面</title>
    <url>/selfTalking/firstPage.html</url>
    <content><![CDATA[<p>之前曾经试着搞过……</p>
<p>首先是用的第三方图床崩了</p>
<p>接着工程自己也崩了（始终没找到是哪里崩的）</p>
<p>正好要做毕设，没时间整这玩意</p>
<p>这下毕设做完了，干脆重新整一个吧（</p>
<p>于是你就见到了这个新站点……</p>
<p>框架：hexo、主题：butterfly、现在以及今后可能都会出现各种魔改（</p>
]]></content>
      <categories>
        <category>日常</category>
      </categories>
      <tags>
        <tag>碎碎念</tag>
        <tag>本站</tag>
      </tags>
  </entry>
  <entry>
    <title>（传教）Disciple大法好！</title>
    <url>/EDM/%EF%BC%88%E4%BC%A0%E6%95%99%EF%BC%89Disciple%E5%A4%A7%E6%B3%95%E5%A5%BD%EF%BC%81%EF%BC%81%EF%BC%81.html</url>
    <content><![CDATA[<p>事先声明：本文是为不了解US Bass甚至不了解奠子阴乐的人准备的暴力传教材料。如果你是奠阴老油条，请当看乐子版油库里地对待本贴，谢谢合作~</p>
<p>本文著于2023年6月22日，当你观看的时候，部分内容可能已经失去时效性，请一切以实际情况为主~</p>
<h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>你问我为什么要写这个文章？因为信仰多得都快溢出来了（</p>
<p>安利喜欢的东西实在是太正常了，所以我也要安利（</p>
<p>如果你没有听说过US Bass，甚至平时不听电子音乐，希望这个帖子能帮助你接触点新东西，缓解你可能存在的歌荒问题或音乐阳痿问题<del>，最好是将你变成Disciple狂信徒（</del></p>
<h1 id="US-Bass是啥呀？"><a href="#US-Bass是啥呀？" class="headerlink" title="US Bass是啥呀？"></a>US Bass是啥呀？</h1><h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>属于电子舞曲的一种音乐范畴，不是某一具体的风格，可以当作是很多种音乐风格的集合</p>
<p>下述的Disciple就是US Bass的代表性厂牌之一</p>
<h2 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h2><p>UK Bass简而言之就是英国人搞的玩意，翻译过来就是“英伦低音音乐”</p>
<p>US Bass是以UK Bass（也是一种音乐范畴）为前辈，在2010年左右，以美国为主战场，演化出的另一个截然不同的体系，而且或多或少吸收了金属乐的元素（所以在US Bass现场里也可以享受Headbang或Moshing哦）</p>
<p>这个时期就是电子音乐（尤指电子舞曲）逐渐走向大众视野，变得流行的时期，所以US Bass相比UK Bass更具有流行性（但比起EDM House还是差远了），至于有多流行，知道Skrillex的人肯定比知道Skream的人多好几倍吧</p>
<p>目前US Bass也才发展十余年，但确实已经形成一个较大的体系了，你想要激烈的，想要柔美的，想要史诗般震撼的，想要又怪又亚比的，这里都有</p>
<p>顺便一提，虽然名字叫US Bass，其实这玩意依旧是英国人发明的，只是被美国人发扬光大了而已，目前US Bass领域也有很多牛逼的英国人哦</p>
<h2 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h2><p>US Dubstep显然属于US Bass体系</p>
<p>虽然平时基本把US Bass和US Dubstep划等于号，但如果你愿意的话，也可以将部分Drum and Bass、部分EDM Trap、Bass House及其衍生、Glitch Hop及其衍生等列入该范畴内</p>
<p>如果你只是普通听歌的，没必要太追究音乐的风格，但听多了自然就越来越熟悉了</p>
<p>广义的Bass音乐包括UK Bass和US Bass，因为US Bass很多时候已经不能被称作“低音音乐”了，所以有些人会将UK Bass称作狭义的Bass音乐</p>
<h1 id="Disciple是啥呀？"><a href="#Disciple是啥呀？" class="headerlink" title="Disciple是啥呀？"></a>Disciple是啥呀？</h1><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251726504.jpg" alt="奠阴原神，启动！"></p>
<h2 id="简介-1"><a href="#简介-1" class="headerlink" title="简介"></a>简介</h2><p>创立于英国，发展于美国的独立音乐厂牌</p>
<p>早期名为Disciple Recording，16年更名为Disciple，持有子厂牌Disciple Round Table</p>
<p>目前的地表最知名US Bass厂牌，江湖人称门徒厂<del>地赛破</del></p>
<p><a href="https://www.disciplerecs.com/">官网</a>    <a href="https://www.youtube.com/@Disciplerecs/about">YouTube</a>    <a href="https://www.instagram.com/disciple/">Instagram</a>    <a href="https://twitter.com/Disciplerecs">Twitter</a>    <a href="https://www.facebook.com/groups/DIscipleFamily/">Facebook</a>    <a href="https://open.spotify.com/playlist/3pZmNRGdF7pvYNBM15tYrv">Spotify</a></p>
<p><del>地赛破成为地表最强的真正原因是上一个地表最强Never Say Die倒闭了</del></p>
<h2 id="音乐"><a href="#音乐" class="headerlink" title="音乐"></a>音乐</h2><p>厂牌主营Heavy Dubstep，偶尔也发行其他US Bass风格</p>
<p>主厂更加流行大众化，多样性更强；子厂更注重Riddim Dubstep，相对而言没那么大众</p>
<p>主厂和圆桌所有已发行曲目加起来接近两千首，保质保量<del>，虽然近期有一定的质量下滑现象</del></p>
<p><a href="https://music.163.com/playlist?id=602546451&userid=319313489">Disciple全收录</a>    <a href="https://music.163.com/playlist?id=161302947&userid=319313489">Disciple Round Table全收录</a></p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><p>说Disciple是最擅长营销的US Bass厂牌之一一点也不为过，可以概括为一群蛇精病组成的幸福大家庭（</p>
<p>成员团结一致，贯彻着”Unus pro omnibus, omnes pro uno”（“人人为我，我为人人”）的门徒精神，为US Bass的发展做出贡献，包括但不限于发布免费教程、发行采样包、助推US Bass的每一次新风口等</p>
<p>不仅如此，厂牌还热衷于进行人设营销<del>虽然比不过Monstercat</del>，打造更吸睛的“Bass爱豆”（非贬义，他们都是有实力的），让人们更能记住这些个性和特点鲜明的制作人</p>
<p>最重要的是，他们真的很擅长整活！三天两头搞一些沙雕玩意，或是全员一起做一首信仰感溢出的曲子，或是为圣诞节的栏杆奏响圣歌，甚至是一起玩Among US（</p>
<p>这一切都让人们谈起Disciple时，内心总是洋溢着一股快乐和温馨感<del>（所谓附加价值策略吧）</del></p>
<h2 id="成员"><a href="#成员" class="headerlink" title="成员"></a>成员</h2><p>签约Disciple的艺人就是Disciple Family的一员，十年来有聚有散，但家一直都是那个家</p>
<p>（以下成员按加入时间排序<del>，但是不一定准</del>）</p>
<p><del>（为了防止有人雷立体人这里就不放照片了，需要的话可以看歌单封面的丑照）</del></p>
<p><del>（其实就是懒得找图）</del></p>
<h3 id="Dodge-Fuski"><a href="#Dodge-Fuski" class="headerlink" title="Dodge&amp;Fuski"></a>Dodge&amp;Fuski</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826022.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8478393762">网易云歌单</a></p>
<ul>
<li>成员：Rob Talbott (aka Dodge), Christopher Allen (Chris aka Fuski)</li>
<li>昵称：豆腐兄弟，DnF等</li>
<li>英国Dubstep组合，成员Rob是Disciple的创始人之一</li>
<li>Dodge是Disciple的<del>神</del>精神领袖，而Fuski长期处于半隐退状态（后来Dodge也半隐退了）</li>
<li>人设上，Dodge是地主家的傻儿子，Fuski是一般通过农民（</li>
<li>相关马甲：Mediks, 4AM, JVST SAY YES, Arthur Talbot</li>
</ul>
<h3 id="Astronaut"><a href="#Astronaut" class="headerlink" title="Astronaut"></a>Astronaut</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826010.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8485973836">网易云歌单</a></p>
<ul>
<li>成员：Daniel Goudie (Dan), Ross Burr (Rossy)</li>
<li>英国Dubstep&#x2F;Complextro组合，成员Rossy是Disciple的创始人之一</li>
<li>除Disciple外还曾签约Monstercat</li>
<li>16年初组合解散，于是Rossy开启了个人项目Myro</li>
<li>相关马甲：Myro, Mediks, Statix</li>
</ul>
<h3 id="Barely-Alive"><a href="#Barely-Alive" class="headerlink" title="Barely Alive"></a>Barely Alive</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826012.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=7277271897">网易云歌单</a></p>
<ul>
<li>成员：Mattew Meier (Matt), William Watkins (Willie), Watt（误）</li>
<li>昵称：BA、小电视<del>、微波炉</del>等</li>
<li>美国Dubstep组合，2014年初签约Disciple，Disciple的第一个签约</li>
<li>有着将Heavy Bass和复古未来系列音乐和视觉风格结合的特色</li>
<li>Disciple的<del>万年老二</del>左右门神之右白虎（误）</li>
<li>[ò…ó]的名字叫Watt，原型是80年代旧电视，设定是Matt和Willie制造的机器人，皮下是Willie</li>
<li><del>站长的推，很可爱，每天都会舔</del></li>
<li>相关马甲：Chodegang</li>
</ul>
<h3 id="Diamond-Eyes"><a href="#Diamond-Eyes" class="headerlink" title="Diamond Eyes"></a>Diamond Eyes</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826017.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8485837696">网易云歌单</a></p>
<ul>
<li>真名：Joshua Marment</li>
<li>英国Dubstep制作人，2014年签约Disciple，2015年退出</li>
<li>而且唱歌也很好听哦</li>
</ul>
<h3 id="Virtual-Riot"><a href="#Virtual-Riot" class="headerlink" title="Virtual Riot"></a>Virtual Riot</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826040.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=7278224175">网易云歌单</a></p>
<ul>
<li>真名：Christian Valentin Brunn (Val)</li>
<li>昵称：VR、紫毛<del>、微阿</del>等</li>
<li>德国Dubstep制作人，2014年签约Disciple</li>
<li>全能型制作人，除Dubstep外，在其他很多EDM场景也颇有建树</li>
<li>Disciple真正的活招牌，人气和才华都是顶流级别</li>
<li>Disciple的左右门神之左青龙（误）</li>
<li><del>二刺螈</del></li>
<li>相关马甲：Chodegang, Still Kids, Your Personal Tranquillizer</li>
</ul>
<h3 id="Dubloadz"><a href="#Dubloadz" class="headerlink" title="Dubloadz"></a>Dubloadz</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826019.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8485774675">网易云歌单</a></p>
<ul>
<li>真名：Dave Nardolilli</li>
<li>美国Dubstep制作人，2015年签约Disciple，2018年初退出</li>
<li>身为DJ制作人的同时也是画师，最喜欢画小怪物</li>
<li>拥有自己创立的厂牌Ghost Gang Records</li>
<li>2020年因精神状态不佳和瓶颈宣布引退，现在则处于半复出状态</li>
<li><del>日本游戏厨</del></li>
<li>相关马甲：Chodegang</li>
</ul>
<h3 id="Myro"><a href="#Myro" class="headerlink" title="Myro"></a>Myro</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826028.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8480797466">网易云歌单</a></p>
<ul>
<li>真名：Ross Burr (Rossy)</li>
<li>英国Dubstep制作人，Disciple创始人之一，其实就是Astronaut解散后单飞的Rossy</li>
<li>擅长旋律系Wobble Bass</li>
<li><del>Myro new EP when?</del></li>
<li>相关马甲：Astronaut, Mediks, Statix</li>
</ul>
<h3 id="Fox-Stevenson"><a href="#Fox-Stevenson" class="headerlink" title="Fox Stevenson"></a>Fox Stevenson</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826021.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8494671473">网易云歌单</a></p>
<ul>
<li>真名：Stanley Stevenson-Byrne (Stan)</li>
<li>昵称：狐狸</li>
<li>英国Dubstep&#x2F;DnB&#x2F;House制作人，2016年签约Disciple，2022年初退出</li>
<li>以好听的旋律和人声闻名，狐狸唱歌特好听</li>
<li>早期艺名为Stan SB（草）</li>
</ul>
<h3 id="Oolacile"><a href="#Oolacile" class="headerlink" title="Oolacile"></a>Oolacile</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826031.png" alt="logo（这其实是他的旧logo，但是我没找到合适的新logo的素材）"></p>
<p><a href="https://music.163.com/playlist?id=8492346174">网易云歌单</a></p>
<ul>
<li>真名：Cooper Medearis</li>
<li>美国Dubstep制作人，2016年末签约Disciple，2018年退出</li>
<li>拥有自己创立的厂牌Halcyon</li>
<li><del>理念和实力比地赛破人更加前卫，待地赛破是一种屈才，所以退了才好</del></li>
</ul>
<h3 id="PhaseOne"><a href="#PhaseOne" class="headerlink" title="PhaseOne"></a>PhaseOne</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826034.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8480773164">网易云歌单</a></p>
<ul>
<li>真名：Graeme Duffy</li>
<li>昵称：P1、一哥等</li>
<li>澳大利亚Dubstep制作人，2017年初签约Disciple</li>
<li>擅长Metalstep，甚至多次与金属乐队合作</li>
<li>拥有自己的创立的厂牌Sounds Of Mayhem</li>
<li>截至本贴发布时还没有确切的一哥是否已退厂的信息，但一哥似乎去意已决了</li>
</ul>
<h3 id="The-Others"><a href="#The-Others" class="headerlink" title="The Others"></a>The Others</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826033.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8506937806">网易云歌单</a></p>
<ul>
<li>原名：Alex Crawford (aka D-Code)</li>
<li>前成员：Paul Baker (aka DeXterous)</li>
<li>英国Dubstep组合&#x2F;制作人，2017年初以单人的形式加入Disciple，2018年末左右退出</li>
</ul>
<h3 id="Truth"><a href="#Truth" class="headerlink" title="Truth"></a>Truth</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826037.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8493341170">网易云歌单</a></p>
<ul>
<li>成员：Andre Fernandez, Tristan Roake</li>
<li>前成员：Julian Van Uden</li>
<li>新西兰Dubstep组合，2017年签约Disciple，2018年退出</li>
</ul>
<h3 id="12th-Planet"><a href="#12th-Planet" class="headerlink" title="12th Planet"></a>12th Planet</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826009.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8484728638">网易云歌单</a></p>
<ul>
<li>真名: John Christopher Dadzie</li>
<li>昵称：12星、12th等</li>
<li>美国Dubstep制作人，2017年签约Disciple，2021年末退出</li>
<li>将dubstep传入美国的功臣，被冠以重量级称号“Dubstep教父”</li>
<li>Disciple Round Tabele的前任主理人</li>
<li><del>Never Say Die和Disciple决裂的直接原因</del></li>
<li>关于X侵风波：2021年末，12th的摄影师♀指控12th对其进行过X侵，所以12th被逐出Disciple且遭到了严重的声誉危机，但2022年初12th发表了澄清声明，目前看来声明似乎有效，因此12th逐渐恢复正常音乐活动，但也没有再回到Disciple</li>
</ul>
<h3 id="Virus-Syndicate"><a href="#Virus-Syndicate" class="headerlink" title="Virus Syndicate"></a>Virus Syndicate</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826039.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8482447407">网易云歌单</a></p>
<ul>
<li>成员：David Hindley (aka JSD), Nikhil Nagarkar (aka Nika D)</li>
<li>前成员：Mark Foster, Marvin McKenzie</li>
<li>英国Dubstep&#x2F;Grime乐队&#x2F;组合，2017年签约Disciple</li>
<li><del>Disciple御用歌姬</del></li>
<li>拥有自己创立的厂牌Bad Medic Records</li>
</ul>
<h3 id="Hatcha"><a href="#Hatcha" class="headerlink" title="Hatcha"></a>Hatcha</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826024.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8486310191">网易云歌单</a></p>
<ul>
<li>真名：Terry Leonard</li>
<li>英国Dubstep制作人，2017年末签约Disciple，2018年末退出</li>
<li>这位更是重量级，UK Dubstep的创始人和推广人之一<del>，地赛破何德何能能把他拉来</del></li>
<li>早期艺名为DJ Hatcha</li>
</ul>
<h3 id="Eliminate"><a href="#Eliminate" class="headerlink" title="Eliminate"></a>Eliminate</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826029.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=7277758114">网易云歌单</a></p>
<ul>
<li>真名：Nathan Merrill (Nate)</li>
<li>昵称：<del>Eliminiminiminate、</del>赛博鲸等</li>
<li>美国Trap&#x2F;Dubstep 制作人，2018年签约Disciple</li>
<li>擅长鲸鱼般的高频音色设计，被称为Disciple中的音色怪物，个人特点鲜明</li>
<li>乐子人，承包了Disciple一半的整活（确信）</li>
<li>身为DJ制作人的同时也是youtuber (?)</li>
<li><del><strong>VIRTUAL RIOT IS MY BEST FRIEND</strong></del></li>
</ul>
<h3 id="Panda-Eyes"><a href="#Panda-Eyes" class="headerlink" title="Panda Eyes"></a>Panda Eyes</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826035.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8492661705">网易云歌单</a></p>
<ul>
<li>真名：Oskar Gabriel Steinbeck</li>
<li>昵称：PE<del>、潘大爱</del></li>
<li>瑞士Dubstep制作人，2018年初签约Disciple，半年后退出</li>
<li>拥有自己创立的厂牌Panda Eyes Records</li>
<li><del>二刺螈</del></li>
<li><del>究极任豚</del></li>
<li>Virtual Riot2.0（错乱）<del>搁他面前开这个玩笑他会生气的</del></li>
</ul>
<h3 id="MVRDA"><a href="#MVRDA" class="headerlink" title="MVRDA"></a>MVRDA</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826027.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8489715365">网易云歌单</a></p>
<ul>
<li>真名：Tommy Lee Ray</li>
<li>英国Dubstep制作人，2018年签约Disciple Round Table，2023年初退出</li>
<li>早期艺名为MurDa</li>
<li>相关马甲：TOOG &amp; GOOT</li>
</ul>
<h3 id="INFEKT"><a href="#INFEKT" class="headerlink" title="INFEKT"></a>INFEKT</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826025.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8480638861">网易云歌单</a></p>
<ul>
<li>真名：Christian Fial</li>
<li>德国Dubstep制作人，2018年签约Disciple Round Table</li>
<li>Riddim Dubstep当之无愧的代表人物</li>
<li>Trench运动的主导者，主张将最纯粹的Riddim Dubstep称为Trench</li>
<li><del>很可爱，笑容异常的灿烂，见一次乐一次</del></li>
</ul>
<h3 id="Modestep"><a href="#Modestep" class="headerlink" title="Modestep"></a>Modestep</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826026.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=7688309976">网易云歌单</a></p>
<ul>
<li>真名：Joshua Friend (Josh)</li>
<li>前成员：Matthew Curtis, Pat Lundy, Nick Tsang, Kyle Deek, Tony Friend, Oz Katerji</li>
<li>英国Dubstep&#x2F;DnB&#x2F;另类摇滚&#x2F;硬摇滚&#x2F;电子摇滚乐队&#x2F;组合&#x2F;制作人，2018年以双人组（Josh和Pat）的形式签约Disciple，2023年初退出</li>
<li>因成员悉数退出，目前只剩Josh一人，所以Modestep实质已成为Josh的个人项目</li>
<li><del>Josh唱歌真的巨好听，感觉是天使下凡</del></li>
</ul>
<h3 id="Oliverse"><a href="#Oliverse" class="headerlink" title="Oliverse"></a>Oliverse</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826030.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=7279474970">网易云歌单</a></p>
<ul>
<li>真名：Ryan Oliphant</li>
<li>昵称：欧宝</li>
<li>英国Dubstep制作人，2018年签约Disciple</li>
<li>擅长旋律系Wobble Bass</li>
<li><del>众所周知当地赛破没活整时就会把欧宝拉来填充档期</del></li>
</ul>
<h3 id="Terravita"><a href="#Terravita" class="headerlink" title="Terravita"></a>Terravita</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826038.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8481426062">网易云歌单</a></p>
<ul>
<li>成员：Chris Barlow, Jon Spero</li>
<li>前成员：Matt Simmers</li>
<li>英国Dubstep&#x2F;DnB组合，2018年末签约Disciple</li>
</ul>
<h3 id="Chibs"><a href="#Chibs" class="headerlink" title="Chibs"></a>Chibs</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826016.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8485754260">网易云歌单</a></p>
<ul>
<li>真名：Ryan Michael Smith</li>
<li>昵称：薯片<del>、吃不死</del>等</li>
<li>澳大利亚Dubstep制作人，2019年签约Disciple Round Table，2023年初退出</li>
</ul>
<h3 id="Bandlez"><a href="#Bandlez" class="headerlink" title="Bandlez"></a>Bandlez</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826013.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8477150916">网易云歌单</a></p>
<ul>
<li>成员：Diandre Ruiz, Vishal Bhanderi</li>
<li>昵称：班豆子</li>
<li>美国Dubstep组合，2019年签约Disciple Round Table</li>
<li>红色卫衣是Diandre，绿色卫衣是Vishal</li>
<li>Vishal实际上已是现任Disciple主理人</li>
</ul>
<h3 id="Dirtyphonics"><a href="#Dirtyphonics" class="headerlink" title="Dirtyphonics"></a>Dirtyphonics</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826018.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8478077916">网易云歌单</a></p>
<ul>
<li>成员：Charly Barranger, Julien “PitchIn” Corrales</li>
<li>前成员：Thomas Desbouvrie, James “Youthstar” Davies, Pho</li>
<li>法国Dubstep&#x2F;DnB乐队&#x2F;组合，2019年初以双人组的形式签约Disciple</li>
</ul>
<h3 id="Samplifire"><a href="#Samplifire" class="headerlink" title="Samplifire"></a>Samplifire</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826041.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8480625862">网易云歌单</a></p>
<ul>
<li>真名：Samy Beyou</li>
<li><del>昵称：三浦里发芽</del></li>
<li>法国Dubstep制作人，2019年签约Disciple Round Table</li>
<li>维京Dubstep的始作俑者（误）</li>
<li>相关马甲：TOOG &amp; GOOT</li>
</ul>
<h3 id="ECRAZE"><a href="#ECRAZE" class="headerlink" title="ECRAZE"></a>ECRAZE</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826020.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8478895572">网易云歌单</a></p>
<ul>
<li>真名：Thomas Tran (Thom)</li>
<li>法国Dubstep制作人，2020年签约Disciple Round Table</li>
<li><del>Graphyt的好基友</del></li>
</ul>
<h3 id="Graphyt"><a href="#Graphyt" class="headerlink" title="Graphyt"></a>Graphyt</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826023.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8478898774">网易云歌单</a></p>
<ul>
<li>真名：Guillaume Sergent</li>
<li>法国Dubstep制作人，2020年签约Disciple Round Table</li>
<li><del>ECRAZE的好基友</del></li>
</ul>
<h3 id="Ray-Volpe"><a href="#Ray-Volpe" class="headerlink" title="Ray Volpe"></a>Ray Volpe</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826036.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8492443619">网易云歌单</a></p>
<ul>
<li>真名：Raymond Volpe Jr.</li>
<li>美国Dubstep人，2021年签约Disciple，2023年初退出</li>
<li>自设是名为Volpetron的机器人</li>
<li>托地赛破的福，他的人气在短短一年半里指数级增长<del>，然而火了后就润了，把地赛破当跳板是吧</del></li>
</ul>
<h3 id="Bainbridge"><a href="#Bainbridge" class="headerlink" title="Bainbridge"></a>Bainbridge</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826011.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8477026556">网易云歌单</a></p>
<ul>
<li>真名：Reginald Moe (Reggie)</li>
<li>美国Dubstep制作人，2021年末签约Disciple Round Table</li>
</ul>
<h3 id="beastboi"><a href="#beastboi" class="headerlink" title="beastboi."></a>beastboi.</h3><p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306241826015.png" alt="logo"></p>
<p><a href="https://music.163.com/playlist?id=8477592360">网易云歌单</a></p>
<ul>
<li>真名：Khai Adams</li>
<li><del>昵称：野兽先辈</del></li>
<li>美国Dubstep制作人，2022年末签约Disciple Round Table</li>
<li>将迷幻亚比色彩带到主流Bass场景（指Disciple）的人</li>
</ul>
<h1 id="Disciple有啥好活啊？"><a href="#Disciple有啥好活啊？" class="headerlink" title="Disciple有啥好活啊？"></a>Disciple有啥好活啊？</h1><p>我在这里就以纯个人口味安利几个Disciple的好活吧~</p>
<p>你喜不喜欢一首歌只有你自己知道，我的安利仅供参考（</p>
<h2 id="主厂"><a href="#主厂" class="headerlink" title="主厂"></a>主厂</h2><div class="music-list">

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/music/202304292228365.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">我最爱的微波炉酱，如果真的要选一个最能代表微波炉的作品，应该就是它了吧</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="75385252" data-server="netease" data-type="album">Lost In Time EP</p>
      <p class="author">Barely Alive</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="75385252" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="75385252" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251523083.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">虚拟暴动真是很多值得听的东西，所以选这个离发blog时间最近的大砖吧（</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="132907606" data-server="netease" data-type="album">Simulation</p>
      <p class="author">Virtual Riot</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="132907606" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="132907606" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251527485.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">Metalstep经典~好像也经常被用作金属乐迷和电子乐迷间相互了解的桥梁</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="78285882" data-server="netease" data-type="album">TRANSCENDENCY</p>
      <p class="author">PhaseOne</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="78285882" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="78285882" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251529370.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">千言万语汇成一句话：Eliminate究竟是什么天才</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="133502402" data-server="netease" data-type="album">Belly Of The Beast EP</p>
      <p class="author">Eliminate</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="133502402" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="133502402" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251532034.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">来自Halcyon的BVSSIC给地赛破进行了一次降维打击（</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="146347750" data-server="netease" data-type="album">A Blissful Gaze Of Ignorance</p>
      <p class="author">BVSSIC</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="146347750" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="146347750" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251540989.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">任何邪恶终将绳之以法</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="148312465" data-server="netease" data-type="album">THE EP</p>
      <p class="author">Loompaskettee</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="148312465" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="148312465" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  
</div>


<h2 id="圆桌"><a href="#圆桌" class="headerlink" title="圆桌"></a>圆桌</h2><div class="music-list">

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251547906.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">Bass x HDM的快乐</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="152982829" data-server="netease" data-type="album">Ravolution EP</p>
      <p class="author">Graphyt</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="152982829" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="152982829" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251551659.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">至少我个人真的很喜欢薯片弹簧般的音色，听了他后才理解了Riddim Dubstep的爽点</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="140767376" data-server="netease" data-type="album">Pentagon EP</p>
      <p class="author">Chibs</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="140767376" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="140767376" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251553757.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">来自法国的精神维京人和他取材自北欧神话的佳作</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="123748486" data-server="netease" data-type="album">Loki EP</p>
      <p class="author">Samplifire</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="123748486" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="123748486" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  

  <div class="music-item">
      <div class="pic-item">
        <img class="cover" src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202306251549072.jpg?x-oss-process=image/resize,s_300">
        <div class="inner">
        </div>
        <img no-lazy src= "/img/loading.gif" data-lazy-src="/img/vinyl.png" class="vinyl no-lightbox">
        <div class="description">
      <p class="des-inner">圆桌boy超级大猩猩和他的丛林烧flow</p>
    </div>
    
      </div>
      <p class="title music-to-site" title="去平台" data-id="144712624" data-server="netease" data-type="album">Embrace EP</p>
      <p class="author">BeutNoise</p>
      <div class="music-play-btns">
        <button class="music-play-btn play-album" data-id="144712624" data-server="netease" data-type="album">播放专辑</button>
        <button class="music-play-btn add-album" data-id="144712624" data-server="netease" data-type="album">添至列表</button>
      </div>
    </div>
  
</div>


<h2 id="其他（？）"><a href="#其他（？）" class="headerlink" title="其他（？）"></a>其他（？）</h2><p><del><a href="https://www.bilibili.com/video/BV1wt411r7Gu">Disciple一群做电音的大佬们居然跑来唱歌？</a></del></p>
<p><a href="https://www.bilibili.com/video/BV1QT4y1J7hU?vd_source=abff2190dd215e2033f2ec57123dd1d6">Disciple - We Don’t Play 歌词版MV</a></p>
<h1 id="Disciple听够了，然后呢？"><a href="#Disciple听够了，然后呢？" class="headerlink" title="Disciple听够了，然后呢？"></a>Disciple听够了，然后呢？</h1><p>如果你真的被我拉入了坑，我首先跪下来感谢你（</p>
<p>虽然接近两千首歌还是有点多的，但也总有听完的一天，也总有热情退却的一天，是吧</p>
<p>如果你已经不满足于Disciple，想了解更多的US Bass，那我这边推荐以下路线：</p>
<h2 id="路线1：继续主流鲈鱼之旅"><a href="#路线1：继续主流鲈鱼之旅" class="headerlink" title="路线1：继续主流鲈鱼之旅"></a>路线1：继续主流鲈鱼之旅</h2><p>上文有提到，其实倒闭前的Never Say Die（简称NSD）以及它的子厂牌Never Say Die: Black Label（简称黑牌）才是地表最强Bass厂<del>，地赛破长时间属于老二</del></p>
<p>甚至在一开始，Disciple其实就是NSD的子厂牌，只不过因为种种原因，Disciple独立出去还成了竞争对手</p>
<p>总体而言，NSD在US Bass的影响力和贡献<del>以及作品平均质量</del>各方面都胜过Disciple</p>
<p>但因为管理层不稳定和财政亏损的原因，结果还是倒闭了，高口碑高地位都没能挽救这一切<del>，更加证明了万物离不开营销</del></p>
<p>如果你觉得主流Dubstep不错，想多听一点，那么一定要尝试NSD和黑牌！绝对不会让你失望的！</p>
<p>如果你对附加价值策略很感冒的话也可以听听Monstercat Uncaged，Monstercat作为主流多风格厂牌，最大的价值就是作为引路人，让你发现”原来还有这种音乐！“，进而让人们自取所好地深入并接触其他厂牌<del>，而且Monstercat真的很爱玩人设营销</del></p>
<h2 id="路线2：听点色的，斯哈斯哈"><a href="#路线2：听点色的，斯哈斯哈" class="headerlink" title="路线2：听点色的，斯哈斯哈"></a>路线2：听点色的，斯哈斯哈</h2><p>除了主流Dubstep外，近几年非常火（所以这个也叫主流）的一种音乐概念Colour Bass，也可以尝试尝试</p>
<p>其实它不是一种风格，而是一种音色元素，但它的命名者Dubstep制作人，且人们多以Dubstep形式制作Colour Bass作品，所以可以说它和Dubstep密切相关</p>
<p>那在这个Colour Bass场景里，Disciple就真的起到重要推动了！<del>地赛破为数不多的闪光时刻！</del></p>
<p>Disciple的Afterlife系列，几乎是Colour Bass领域的必听之作<del>，但它截至目前也只出了两弹</del></p>
<p>另外，盯紧英国小可爱Chime，他参与开发并命名了Colour Bass，并创立了自己的厂牌Rushdown以对此进行推广，所以Rushdown就是Colour Bass的代表厂牌<del>，虽然目前暂停运营中</del></p>
<p>Chime曾经多次在Disciple发表作品，在这里你也可以听到Colour Bass的一些雏形哦</p>
<h2 id="路线3：如何做个鲈鱼亚比"><a href="#路线3：如何做个鲈鱼亚比" class="headerlink" title="路线3：如何做个鲈鱼亚比"></a>路线3：如何做个鲈鱼亚比</h2><p>觉得主流Dubstep和Colour Bass不够怪？那咱US Bass确实也有怪的给你吃</p>
<p>隆重向你介绍一种与Colour Bass有一定交集的US Bass风格——Future Riddim！</p>
<p>Future Riddim注重旋律，从概念上看和Melodic Riddim差不多，但实际场景中还是出现了一些区别</p>
<p>最显而易见的就是，Future Riddim经常被融入了一些10年代互联网亚比文化的元素，主要是融入了网络音乐，有时还会有网络视觉，如果给你三个字形容Future Riddim和主流US Bass的区别，那一定是”有点怪“</p>
<p>咱们Disciple是主流厂，亚比玩意真不算多，但你也可以像了解Chime和Colour Bass一样，盯紧Oolacile，他和他的厂牌Halcyon就是Future Riddim的主要推动者，试试从他在Disciple发的歌过渡到他离开Disciple后发的歌以及Halcyon吧</p>
<p>顺便一提，Rushdown的歌不一定是Colour Bass，Halcyon的歌也不一定是Future Riddim</p>
<h2 id="路线4：追根溯源，回到英国"><a href="#路线4：追根溯源，回到英国" class="headerlink" title="路线4：追根溯源，回到英国"></a>路线4：追根溯源，回到英国</h2><p>上文也提到过US Bass发源自UK Bass，那么Disciple有没有接纳过UK Bass？那还是有一点的嘛</p>
<p>2018年左右的Disciple其实没有现在的Disciple那样过于严格地限制风格，甚至还签约了一些曾经活跃于UK Bass场景的制作人：Hatcha、Truth、The Others</p>
<p>当然这个Hatcha更是重量级，如果你去查找他的资料，你会发现Big Apple唱片店，以及他以前经常发歌的Tempa厂牌，那么恭喜你，你发现了Dubstep最重要的起源场景，由此开始你的溯源之旅吧~</p>
<p>如果你想了解一下Dubstep的烈性化美国化进程，也可以听一听被誉为“Dubstep教父”的12th Planet哦</p>
<p>当然我对UK Bass的了解还只停留在很浅的层次，在此就不故弄玄虚了orz（<del>其实我对US Bass的了解也挺浅的</del></p>
<h2 id="路线0：没有路线，或者处处都是路线"><a href="#路线0：没有路线，或者处处都是路线" class="headerlink" title="路线0：没有路线，或者处处都是路线"></a>路线0：没有路线，或者处处都是路线</h2><p>听歌嘛，只是作为一种爱好的话，那就是讲究一个怎么舒服怎么来</p>
<p>虽然这篇文章主要的出发点是安利Disciple和US Bass，但其实，何必拘泥于US Bass呢</p>
<p>多听不同的音乐，虽然不能帮你多赚几个钱，但是帮你拓宽一下欣赏广度，不也挺好的吗~</p>
<p>挖歌通常遵循一个链式反应搜索：从一首你喜欢的歌出发，可以扩展到这个歌的所有staff做的歌，可以扩展到这个厂牌的所有歌，甚至可以打听一下这首歌的流派风格并寻找其他相似的歌</p>
<p>这样一来，你所可能接触到的歌的数量就呈指数级上升了！从此再也不歌荒！</p>
]]></content>
      <categories>
        <category>EDM</category>
      </categories>
      <tags>
        <tag>爱好</tag>
        <tag>安利</tag>
        <tag>EDM</tag>
      </tags>
  </entry>
  <entry>
    <title>我制作了一个唱片架</title>
    <url>/web/diy/1.%E6%88%91%E5%88%B6%E4%BD%9C%E4%BA%86%E4%B8%80%E4%B8%AA%E5%94%B1%E7%89%87%E6%9E%B6.html</url>
    <content><![CDATA[<p>因为我很喜欢听音乐（尤其是电子音乐），所以我希望我自己的博客能给浏览者安利很多很多好听的音乐。</p>
<p>总感觉这个全局吸底aplayer如果只能播一个歌单的话太浪费了。我希望它能像家里摆着的唱片机一样，当客人来做客时，任他在唱片架挑选中意的唱片，并放进这个唱片机里开始聆听。</p>
<p>虽然我是技术渣，但还是想试试。</p>
<h1 id="乐辑"><a href="#乐辑" class="headerlink" title="乐辑"></a>乐辑</h1><p>这里直接照搬了butterfly主题中图册页的样式和标签插件（确实很好看），就不赘述了。</p>
<p>收藏的唱片一多，确实就需要对唱片架中的唱片进行归类。</p>
<h1 id="唱片架"><a href="#唱片架" class="headerlink" title="唱片架"></a>唱片架</h1><p>一定程度上参考了butterfly的图片页。</p>
<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><p>大概长这样：</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202305011601485.png"></p>
<p>当鼠标移至唱片封面时，会出现个人的<del>吐槽</del>评价，以及黑胶唱片被拿出的效果。</p>
<p>点击下方的播放，底部aplayer的播放列表就会变成这个唱片的曲目啦。</p>
<h2 id="结构"><a href="#结构" class="headerlink" title="结构"></a>结构</h2><p>为了方便日后使用，干脆做成一个标签插件。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * AuroraCafe</span></span><br><span class="line"><span class="comment"> * musicGroup and musicItem</span></span><br><span class="line"><span class="comment"> * &#123;% musicGroup [name] [descr] [url] [img] %&#125;</span></span><br><span class="line"><span class="comment"> * &#123;% musicItem [cover] [title] [author] [id] [server] [type] [description] %&#125;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&#x27;use strict&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> urlFor = <span class="built_in">require</span>(<span class="string">&#x27;hexo-util&#x27;</span>).<span class="property">url_for</span>.<span class="title function_">bind</span>(hexo)</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * musicGroup省略</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">musicItem</span>(<span class="params">args</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> cover = args[<span class="number">0</span>]</span><br><span class="line">  <span class="keyword">const</span> title = args[<span class="number">1</span>]</span><br><span class="line">  <span class="keyword">const</span> author = args[<span class="number">2</span>]</span><br><span class="line">  <span class="keyword">const</span> id = args[<span class="number">3</span>]</span><br><span class="line">  <span class="keyword">const</span> server = args[<span class="number">4</span>]</span><br><span class="line">  <span class="keyword">const</span> type = args[<span class="number">5</span>]</span><br><span class="line">  <span class="keyword">const</span> description = args[<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> extraHTML = <span class="string">&#x27;&#x27;</span></span><br><span class="line">  <span class="keyword">if</span>(description &amp;&amp; <span class="title function_">typeof</span>(description)!==<span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">    extraHTML = <span class="string">`&lt;div class=&quot;description&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;p class=&quot;des-inner&quot;&gt;<span class="subst">$&#123;description&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">    `</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> <span class="string">`</span></span><br><span class="line"><span class="string">  &lt;div class=&quot;music-item&quot;&gt;</span></span><br><span class="line"><span class="string">      &lt;div class=&quot;pic-item&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;img class=&quot;cover no-lightbox&quot; src=&quot;<span class="subst">$&#123;cover&#125;</span>?x-oss-process=image/resize,s_300&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;div class=&quot;inner&quot;&gt;</span></span><br><span class="line"><span class="string">        &lt;/div&gt;</span></span><br><span class="line"><span class="string">        &lt;img no-lazy src=&quot;/img/vinyl.png&quot; class=&quot;vinyl no-lightbox&quot;&gt;</span></span><br><span class="line"><span class="string">        <span class="subst">$&#123;extraHTML&#125;</span></span></span><br><span class="line"><span class="string">      &lt;/div&gt;</span></span><br><span class="line"><span class="string">      &lt;p class=&quot;title&quot;&gt;<span class="subst">$&#123;title&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;p class=&quot;author&quot;&gt;<span class="subst">$&#123;author&#125;</span>&lt;/p&gt;</span></span><br><span class="line"><span class="string">      &lt;button class=&quot;music-play-btn&quot; data-id=&quot;<span class="subst">$&#123;id&#125;</span>&quot; data-server=&quot;<span class="subst">$&#123;server&#125;</span>&quot; data-type=&quot;<span class="subst">$&#123;type&#125;</span>&quot;&gt;播放&lt;/button&gt;</span></span><br><span class="line"><span class="string">    &lt;/div&gt;</span></span><br><span class="line"><span class="string">  `</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// hexo.extend.tag.register(&#x27;musicGroup&#x27;, musicGroup)</span></span><br><span class="line">hexo.<span class="property">extend</span>.<span class="property">tag</span>.<span class="title function_">register</span>(<span class="string">&#x27;musicItem&#x27;</span>, musicItem)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h2><p>在<code>/source/css/tags</code>中创建了<code>musicItem.styl</code>，用于唱片架样式。</p>
<blockquote>
<p>别忘了引入到总样式文件里。</p>
</blockquote>
<p>每一个唱片是<code>.music-item</code>，一个唱片架就是<code>.music-list</code>。</p>
<blockquote>
<p>老实说我还是比较习惯scss的写法，stylus让我觉得好别扭orz。</p>
</blockquote>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line"><span class="selector-id">#article-container</span></span><br><span class="line">  </span><br><span class="line">  <span class="selector-class">.music-list</span> </span><br><span class="line">    <span class="attribute">display</span>: grid;</span><br><span class="line">    <span class="attribute">grid-template-columns</span>: <span class="number">1</span>fr <span class="number">1</span>fr;</span><br><span class="line">    <span class="attribute">grid-row</span>-gap: <span class="number">1.5rem</span>;</span><br><span class="line">    justify-items: center;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">2rem</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">500px</span>)</span><br><span class="line">      &amp;</span><br><span class="line">        grid-template-columns: <span class="number">1</span>fr;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.music-item</span> </span><br><span class="line">      <span class="attribute">width</span>: <span class="number">14rem</span>;</span><br><span class="line">      <span class="attribute">height</span>: <span class="number">18rem</span>;</span><br><span class="line">      <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">      <span class="attribute">display</span>: flex;</span><br><span class="line">      <span class="attribute">flex-direction</span>: column;</span><br><span class="line">    </span><br><span class="line">      <span class="selector-class">.pic-item</span> </span><br><span class="line">        <span class="attribute">position</span>: relative;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">12rem</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">12rem</span>;</span><br><span class="line">    </span><br><span class="line">        <span class="selector-class">.cover</span> </span><br><span class="line">          <span class="attribute">width</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">    </span><br><span class="line">        <span class="selector-class">.inner</span> </span><br><span class="line">          <span class="attribute">width</span>: <span class="number">11.5rem</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">11.5rem</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">3</span>);</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">1rem</span>;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">top</span>: <span class="number">0.25rem</span>;</span><br><span class="line">          <span class="attribute">left</span>: <span class="number">1.25rem</span>;</span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">          <span class="attribute">z-index</span>: <span class="number">1</span>;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">        <span class="selector-class">.vinyl</span> </span><br><span class="line">          <span class="attribute">width</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">background-color</span>: transparent;</span><br><span class="line">          <span class="attribute">left</span>: <span class="number">1.5rem</span>;</span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-class">.description</span> </span><br><span class="line">          <span class="attribute">visibility</span>: hidden;</span><br><span class="line">          <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">          <span class="attribute">width</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">height</span>: <span class="number">12rem</span>;</span><br><span class="line">          <span class="attribute">background-color</span>: <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,.<span class="number">5</span>);</span><br><span class="line">          <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">          <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">          <span class="attribute">overflow</span>: hidden;</span><br><span class="line">          <span class="attribute">position</span>: absolute;</span><br><span class="line">          <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">          <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.des-inner</span> </span><br><span class="line">            <span class="attribute">width</span>: <span class="number">12rem</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">12rem</span>;</span><br><span class="line">            <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">            <span class="attribute">padding</span>: <span class="number">0.5rem</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">0.5rem</span>;</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">            <span class="attribute">letter-spacing</span>: <span class="number">0.05rem</span>;</span><br><span class="line">            <span class="attribute">line-height</span>: <span class="number">1.1rem</span>;</span><br><span class="line">            <span class="attribute">text-indent</span>: <span class="number">1.6rem</span>;</span><br><span class="line">            <span class="attribute">overflow-y</span>: scroll;</span><br><span class="line">            <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">            <span class="attribute">z-index</span>: <span class="number">5</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span> </span><br><span class="line">          <span class="selector-class">.vinyl</span> </span><br><span class="line">            <span class="attribute">left</span>: <span class="number">3.5rem</span>;</span><br><span class="line">    </span><br><span class="line">          <span class="selector-class">.cover</span> </span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="number">0px</span> <span class="number">5px</span> <span class="number">15px</span>;</span><br><span class="line">          </span><br><span class="line">          <span class="selector-class">.inner</span> </span><br><span class="line">            <span class="attribute">box-shadow</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>) <span class="number">0px</span> <span class="number">5px</span> <span class="number">15px</span>;</span><br><span class="line"></span><br><span class="line">          <span class="selector-class">.description</span></span><br><span class="line">            <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">            <span class="attribute">visibility</span>: visible;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">      <span class="selector-tag">p</span> </span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">cursor</span>: default;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">      <span class="selector-class">.title</span> </span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">1rem</span>;</span><br><span class="line">        <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">        <span class="attribute">word-break</span>: break-all;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">  </span><br><span class="line">      <span class="selector-class">.author</span> </span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">0.8rem</span>;</span><br><span class="line">        <span class="attribute">white-space</span>: nowrap;</span><br><span class="line">        <span class="attribute">word-break</span>: break-all;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">text-overflow</span>: ellipsis;</span><br><span class="line">    </span><br><span class="line">      </span><br><span class="line">      <span class="selector-tag">button</span> </span><br><span class="line">        <span class="attribute">border</span>: none;</span><br><span class="line">        <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">0.25rem</span></span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">1rem</span>;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">0.5rem</span>;</span><br><span class="line">        <span class="attribute">transition</span>: <span class="number">0.1s</span>;</span><br><span class="line">        <span class="attribute">box-shadow</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>) <span class="number">0px</span> <span class="number">4px</span> <span class="number">12px</span>;</span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span> </span><br><span class="line">          <span class="attribute">cursor</span>: pointer;</span><br><span class="line">          <span class="attribute">box-shadow</span>: <span class="built_in">rgba</span>(<span class="number">50</span>, <span class="number">50</span>, <span class="number">93</span>, <span class="number">0.25</span>) <span class="number">0px</span> <span class="number">2px</span> <span class="number">5px</span> -<span class="number">1px</span>, <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.3</span>) <span class="number">0px</span> <span class="number">1px</span> <span class="number">3px</span> -<span class="number">1px</span>;</span><br></pre></td></tr></table></figure>

<h2 id="行为"><a href="#行为" class="headerlink" title="行为"></a>行为</h2><p>在<code>/source/js</code>中创建了<code>changePlay.js</code>，用于唱片架样式。</p>
<blockquote>
<p>其实也就点击播放后切换播放列表这一个行为。</p>
</blockquote>
<p>查阅了其他人的一些博客，各位推介的最佳实践都是使用meting.js对aplayer进行增强，这样只要输入几个参数就能获取整个网络音乐平台的播放列表，不需要自己想办法获得音乐的api。就像这样：</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">meting-js</span> <span class="attr">server</span>=<span class="string">&quot;netease&quot;</span> <span class="attr">type</span>=<span class="string">&quot;album&quot;</span> <span class="attr">id</span>=<span class="string">&quot;154548341&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>但是这样并不符合我的要求，因为当我查阅meting.js的文档时，我发现一个问题：meting.js仿佛是一个完全的黑箱操作，它好像没有提供任何透露流程细节的API，我只能输入几个参数看着它自己在网页的该位置生成一个aplayer播放器。</p>
<blockquote>
<p>这明显不符合我的需求，我希望操作博客已有的全局吸底播放器，而不是生成一个新播放器。</p>
</blockquote>
<p>于是我查看了meting.js的源码，从其中摘取了一段核心代码，并另写了一个普通的函数。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">getMusicList</span> = <span class="keyword">async</span> (<span class="params">options</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> (options) !== <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> api</span><br><span class="line">  <span class="keyword">let</span> result</span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化</span></span><br><span class="line">  <span class="title function_">init</span>()</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">parse</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    api =</span><br><span class="line">      options.<span class="property">api</span> ||</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">meting_api</span> ||</span><br><span class="line">      <span class="string">&#x27;https://api.i-meto.com/meting/api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">auto</span>) <span class="title function_">_parse_link</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">_parse_link</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> rules = [</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*song.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*album.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*artist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*playlist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*discover/toplist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*song/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*album/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*singer/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*playsquare/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*playlist/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*song/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*album/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*artist/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*collect/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> rule <span class="keyword">of</span> rules) &#123;</span><br><span class="line">        <span class="comment">// 返回匹配</span></span><br><span class="line">        <span class="comment">// eg: &quot;https://y.qq.com/n/yqq/song/001RGrEX3ija5X.html&quot;</span></span><br><span class="line">        <span class="comment">// [&quot;y.qq.com/n/yqq/song/001RGrEX3ija5X.html&quot;, &quot;001RGrEX3ija5X&quot;]</span></span><br><span class="line">        <span class="keyword">let</span> patt = <span class="keyword">new</span> <span class="title class_">RegExp</span>(rule[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">let</span> res = patt.<span class="title function_">exec</span>(options.<span class="property">auto</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (res !== <span class="literal">null</span>) &#123;</span><br><span class="line">          options.<span class="property">server</span> = rule[<span class="number">1</span>]</span><br><span class="line">          options.<span class="property">type</span> = rule[<span class="number">2</span>]</span><br><span class="line">          options.<span class="property">id</span> = res[<span class="number">1</span>]</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">parse</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">url</span>) &#123;</span><br><span class="line">      <span class="comment">// 直接构建 APlayer 配置</span></span><br><span class="line">      <span class="keyword">let</span> res = &#123;</span><br><span class="line">        <span class="attr">name</span>: options.<span class="property">name</span> || options.<span class="property">title</span> || <span class="string">&#x27;Audio name&#x27;</span>,</span><br><span class="line">        <span class="attr">artist</span>: options.<span class="property">artist</span> || options.<span class="property">author</span> || <span class="string">&#x27;Audio artist&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: options.<span class="property">url</span>,</span><br><span class="line">        <span class="attr">cover</span>: options.<span class="property">cover</span> || options.<span class="property">pic</span>,</span><br><span class="line">        <span class="attr">lrc</span>: options.<span class="property">lrc</span> || options.<span class="property">lyric</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: options.<span class="property">type</span> || <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      result = res</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// // 1. 通过 meta 拼凑接口参数获得完整接口 （_init 中存放的默认 api）</span></span><br><span class="line">    <span class="comment">// // 2. 请求接口，得到播放列表数据</span></span><br><span class="line">    <span class="keyword">let</span> url = api</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:server&#x27;</span>, options.<span class="property">server</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:type&#x27;</span>, options.<span class="property">type</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:id&#x27;</span>, options.<span class="property">id</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:auth&#x27;</span>, options.<span class="property">auth</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:r&#x27;</span>, <span class="title class_">Math</span>.<span class="title function_">random</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> r.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line">    result = res</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>源码是一个继承了HTMLElement的类（因为要以HTML标签形式使用），其中最核心的两个部分即<code>init()</code>（调整参数）和<code>parse()</code>（获得播放列表）两个方法。</p>
<p>我把它简单修改成了一个传入配置对象参数就可以获得播放列表的函数，把后续各种构建aplayer实例以及创建DOM元素之类的行为都舍弃了。</p>
<blockquote>
<p>你非得问我的话就是我也不懂（</p>
</blockquote>
<p>然后就是为按钮绑定事件了，但好像产生了新问题：hexo中，用户自定义js好像只能全局引入。</p>
<blockquote>
<p> 如果确实有按页面引入的方法的话请务必告诉我</p>
</blockquote>
<p>这意味着如果我是为music-list还是为music-item绑定事件都不行，因为只有在特定的页面中才会有这两类元素，在其他页面载入话就会产生空指针报错。</p>
<p>最后我想了个笨方法：直接给全局绑定点击事件，并检测点击目标（</p>
<blockquote>
<p>别嘲笑我，我要脸orz。</p>
</blockquote>
<p>具体代码：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">async</span> (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> target = event.<span class="property">target</span></span><br><span class="line">  <span class="keyword">const</span> tagName = target.<span class="property">tagName</span></span><br><span class="line">  <span class="keyword">if</span> (tagName.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;BUTTON&quot;</span> &amp;&amp; target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;music-play-btn&quot;</span>)) &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> dataset = target.<span class="property">dataset</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (dataset.<span class="property">server</span> == <span class="string">&quot;undefined&quot;</span> || dataset.<span class="property">type</span> == <span class="string">&quot;undefined&quot;</span> || dataset.<span class="property">id</span> == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;param err&quot;</span>)</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//调用上面的魔改meting.js，获取播放列表</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getMusicList</span>(&#123;</span><br><span class="line">      <span class="attr">server</span>: dataset.<span class="property">server</span>,</span><br><span class="line">      <span class="attr">type</span>: dataset.<span class="property">type</span>,</span><br><span class="line">      <span class="attr">id</span>: dataset.<span class="property">id</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 根据全局吸底aplayer构建实例</span></span><br><span class="line">    <span class="keyword">const</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">      <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;bottom-aplayer&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ap) &#123;</span><br><span class="line">      <span class="comment">// 清空目前的播放列表</span></span><br><span class="line">      ap.<span class="property">list</span>.<span class="title function_">clear</span>()</span><br><span class="line">      <span class="comment">// 添加播放列表</span></span><br><span class="line">      ap.<span class="property">list</span>.<span class="title function_">add</span>(res)</span><br><span class="line">      <span class="comment">// 获取缓存的音量信息</span></span><br><span class="line">      <span class="keyword">const</span> metingStr = <span class="variable language_">localStorage</span>.<span class="title function_">getItem</span>(<span class="string">&quot;metingjs&quot;</span>)</span><br><span class="line">      <span class="keyword">const</span> metingjs = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(metingStr)</span><br><span class="line">      <span class="keyword">let</span> vol</span><br><span class="line">      <span class="keyword">if</span> (<span class="keyword">typeof</span> (metingjs.<span class="property">volume</span>) == <span class="string">&quot;number&quot;</span>) &#123;</span><br><span class="line">        vol = metingjs.<span class="property">volume</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        vol = ap.<span class="property">audio</span>.<span class="property">volume</span></span><br><span class="line">      &#125;</span><br><span class="line">      ap.<span class="title function_">volume</span>(vol, <span class="literal">true</span>)</span><br><span class="line">      <span class="comment">// 展开给浏览者看一下，“我已经改好播放列表了！”</span></span><br><span class="line">      ap.<span class="title function_">setMode</span>(<span class="string">&quot;normal&quot;</span>)</span><br><span class="line">      <span class="comment">// 开始播放</span></span><br><span class="line">      ap.<span class="title function_">play</span>()</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="literal">true</span>)</span><br></pre></td></tr></table></figure>

<h1 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h1><p>随后我又想尝试新的功能：添加一个按钮，点击后不改变播放列表，只是在播放列表末尾插入曲目。</p>
<p>我尝试了一阵子，始终未能成功，但发现了问题所在：</p>
<p>加载站点后所处的的第一个页面，可以从console找到该页面中所有aplayer实例（全部都被butterfly框架放在了<code>aplayers</code>这个数组中，包括吸底aplayer）。</p>
<p>但前往其他页面时，再看<code>aplayers</code>数组，就找不到刚才的实例了。</p>
<p>确实hexo博客不是单页面应用，这样其实也挺正常的。但全局吸底aplayer托了pjax的福，即便页面连续跳转，播放也不间断。</p>
<p>经观察，上面的代码本质上是给原本全局aplayer的位置新建了一个aplayer实例，如果我只想末尾插入曲目，我可能需要获得原本的aplayer实例。</p>
<p>到底该怎么做呢（我不知道pjax的运行机制）。</p>
]]></content>
      <categories>
        <category>前端</category>
        <category>DIY</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>hexo</tag>
        <tag>音乐</tag>
        <tag>DIY</tag>
      </tags>
  </entry>
  <entry>
    <title>唱片架完善+魔改Aplayer</title>
    <url>/web/diy/2.%E5%94%B1%E7%89%87%E6%9E%B6%E5%AE%8C%E5%96%84+%E9%AD%94%E6%94%B9Aplayer.html</url>
    <content><![CDATA[<p>书接上文，因为上次还有未能实现的想法，所以接着鼓捣。</p>
<h1 id="唱片架"><a href="#唱片架" class="headerlink" title="唱片架"></a>唱片架</h1><p>稍稍修改了结构和样式，加上了“添至列表”按钮，点击后就会把这张专里的内容加进左下角播放器的播放列表。</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202305311147177.png"></p>
<p>篇幅所限，结构和样式就先省略了。</p>
<h2 id="添至列表"><a href="#添至列表" class="headerlink" title="添至列表"></a>添至列表</h2><p>主要加上了点击“添至列表”的逻辑。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 配合标签外挂music食用~</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> useSnackbar <span class="keyword">from</span> <span class="string">&quot;../Tools/useSnackbar.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> addCoverColor <span class="keyword">from</span> <span class="string">&quot;./addCoverColor.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 播放事件委托（</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="keyword">async</span> (event) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> target = event.<span class="property">target</span></span><br><span class="line">  <span class="keyword">const</span> tagName = target.<span class="property">tagName</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> dataset = target.<span class="property">dataset</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 参数有误</span></span><br><span class="line">  <span class="keyword">if</span> (dataset.<span class="property">server</span> == <span class="string">&quot;undefined&quot;</span> || dataset.<span class="property">type</span> == <span class="string">&quot;undefined&quot;</span> || dataset.<span class="property">id</span> == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击操作按钮</span></span><br><span class="line">  <span class="keyword">if</span> (tagName.<span class="title function_">toUpperCase</span>() == <span class="string">&quot;BUTTON&quot;</span> &amp;&amp; target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;music-play-btn&quot;</span>)) &#123;</span><br><span class="line">    <span class="comment">// 获得音乐列表</span></span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> <span class="title function_">getMusicList</span>(&#123;</span><br><span class="line">      <span class="attr">server</span>: dataset.<span class="property">server</span>,</span><br><span class="line">      <span class="attr">type</span>: dataset.<span class="property">type</span>,</span><br><span class="line">      <span class="attr">id</span>: dataset.<span class="property">id</span></span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> ap = <span class="variable language_">window</span>.<span class="property">fixedap</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (ap) &#123;</span><br><span class="line">      <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;play-album&quot;</span>)) &#123;</span><br><span class="line">        <span class="comment">// 清空并添加</span></span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">clear</span>()</span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">add</span>(res)</span><br><span class="line">        ap.<span class="title function_">setMode</span>(<span class="string">&quot;normal&quot;</span>)</span><br><span class="line">        ap.<span class="title function_">play</span>()</span><br><span class="line">        <span class="title function_">useSnackbar</span>(<span class="string">&quot;让你见识见识我珍藏已久的好曲子（〃｀ 3′〃）&quot;</span>)</span><br><span class="line">      &#125; <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;add-album&quot;</span>)) &#123;</span><br><span class="line">        <span class="comment">// 目前的播放列表</span></span><br><span class="line">        <span class="keyword">const</span> nowList = ap.<span class="property">list</span>.<span class="property">audios</span></span><br><span class="line">        <span class="comment">// 去重</span></span><br><span class="line">        <span class="keyword">const</span> res2 = res.<span class="title function_">filter</span>(<span class="function"><span class="params">r</span> =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">return</span> !nowList.<span class="title function_">some</span>(<span class="function"><span class="params">n</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> n.<span class="property">url</span> === r.<span class="property">url</span></span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 全是重复</span></span><br><span class="line">        <span class="keyword">if</span> (res2.<span class="property">length</span> === <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="title function_">useSnackbar</span>(<span class="string">&quot;添加过的就不要再加啦w(ﾟДﾟ)w&quot;</span>)</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 添加</span></span><br><span class="line">        ap.<span class="property">list</span>.<span class="title function_">add</span>(res2)</span><br><span class="line">        ap.<span class="title function_">setMode</span>(<span class="string">&quot;normal&quot;</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 滚动音乐列表</span></span><br><span class="line">        <span class="keyword">const</span> apDOM = ap.<span class="property">options</span>.<span class="property">container</span></span><br><span class="line">        <span class="keyword">const</span> apolDOM = apDOM.<span class="title function_">querySelector</span>(<span class="string">&quot;ol&quot;</span>)</span><br><span class="line">        <span class="keyword">const</span> scrollHeight = apolDOM.<span class="property">scrollHeight</span></span><br><span class="line">        apolDOM.<span class="title function_">scrollTo</span>(&#123; <span class="attr">top</span>: scrollHeight, <span class="attr">behavior</span>: <span class="string">&quot;smooth&quot;</span> &#125;)</span><br><span class="line"></span><br><span class="line">        <span class="title function_">useSnackbar</span>(<span class="string">&quot;加到播放列表里啦，慢慢听ᕕ( ᐛ )ᕗ&quot;</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击标题</span></span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> (target.<span class="property">classList</span>.<span class="title function_">contains</span>(<span class="string">&quot;music-to-site&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">let</span> href</span><br><span class="line"></span><br><span class="line">    <span class="keyword">switch</span>(dataset.<span class="property">server</span>) &#123;</span><br><span class="line">      <span class="keyword">case</span>(<span class="string">&quot;netease&quot;</span>):</span><br><span class="line">        href = <span class="string">`https://music.163.com/#/<span class="subst">$&#123;dataset.type&#125;</span>?id=<span class="subst">$&#123;dataset.id&#125;</span>`</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span>(<span class="string">&quot;tencent&quot;</span>):</span><br><span class="line">        <span class="keyword">let</span> type</span><br><span class="line">        <span class="keyword">if</span>(dataset.<span class="property">type</span> === <span class="string">&quot;song&quot;</span>) &#123;</span><br><span class="line">          type = <span class="string">&quot;songDetail&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span>(dataset.<span class="property">type</span> === <span class="string">&quot;album&quot;</span>) &#123;</span><br><span class="line">          type = <span class="string">&quot;albumDetail&quot;</span></span><br><span class="line">        &#125; <span class="keyword">else</span> type = <span class="string">&quot;playlist&quot;</span></span><br><span class="line"></span><br><span class="line">        href = <span class="string">`https://y.qq.com/n/ryqq/<span class="subst">$&#123;type&#125;</span>/<span class="subst">$&#123;dataset.id&#125;</span>`</span></span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">console</span>.<span class="title function_">log</span>(href)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(href) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">open</span>(href)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;, <span class="literal">true</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获得音乐列表</span></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">getMusicList</span> = <span class="keyword">async</span> (<span class="params">options</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> (options) !== <span class="string">&quot;object&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> api</span><br><span class="line">  <span class="keyword">let</span> result</span><br><span class="line"></span><br><span class="line">  <span class="comment">//初始化</span></span><br><span class="line">  <span class="title function_">init</span>()</span><br><span class="line">  <span class="keyword">await</span> <span class="title function_">parse</span>()</span><br><span class="line"></span><br><span class="line">  <span class="keyword">function</span> <span class="title function_">init</span>(<span class="params"></span>) &#123;</span><br><span class="line">    api =</span><br><span class="line">      options.<span class="property">api</span> ||</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">meting_api</span> ||</span><br><span class="line">      <span class="string">&#x27;https://api.i-meto.com/meting/api?server=:server&amp;type=:type&amp;id=:id&amp;r=:r&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">auto</span>) <span class="title function_">_parse_link</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">_parse_link</span>(<span class="params"></span>) &#123;</span><br><span class="line">      <span class="keyword">let</span> rules = [</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*song.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*album.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*artist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*playlist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;music.163.com.*discover/toplist.*id=(\\d+)&#x27;</span>, <span class="string">&#x27;netease&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*song/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*album/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*singer/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*playsquare/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;y.qq.com.*playlist/(\\w+).html&#x27;</span>, <span class="string">&#x27;tencent&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*song/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;song&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*album/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;album&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*artist/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;artist&#x27;</span>],</span><br><span class="line">        [<span class="string">&#x27;xiami.com.*collect/(\\w+)&#x27;</span>, <span class="string">&#x27;xiami&#x27;</span>, <span class="string">&#x27;playlist&#x27;</span>],</span><br><span class="line">      ]</span><br><span class="line"></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">let</span> rule <span class="keyword">of</span> rules) &#123;</span><br><span class="line">        <span class="comment">// 返回匹配</span></span><br><span class="line">        <span class="comment">// eg: &quot;https://y.qq.com/n/yqq/song/001RGrEX3ija5X.html&quot;</span></span><br><span class="line">        <span class="comment">// [&quot;y.qq.com/n/yqq/song/001RGrEX3ija5X.html&quot;, &quot;001RGrEX3ija5X&quot;]</span></span><br><span class="line">        <span class="keyword">let</span> patt = <span class="keyword">new</span> <span class="title class_">RegExp</span>(rule[<span class="number">0</span>])</span><br><span class="line">        <span class="keyword">let</span> res = patt.<span class="title function_">exec</span>(options.<span class="property">auto</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (res !== <span class="literal">null</span>) &#123;</span><br><span class="line">          options.<span class="property">server</span> = rule[<span class="number">1</span>]</span><br><span class="line">          options.<span class="property">type</span> = rule[<span class="number">2</span>]</span><br><span class="line">          options.<span class="property">id</span> = res[<span class="number">1</span>]</span><br><span class="line">          <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">async</span> <span class="keyword">function</span> <span class="title function_">parse</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (options.<span class="property">url</span>) &#123;</span><br><span class="line">      <span class="comment">// 直接构建 APlayer 配置并加载 APlayer</span></span><br><span class="line">      <span class="keyword">let</span> res = &#123;</span><br><span class="line">        <span class="attr">name</span>: options.<span class="property">name</span> || options.<span class="property">title</span> || <span class="string">&#x27;Audio name&#x27;</span>,</span><br><span class="line">        <span class="attr">artist</span>: options.<span class="property">artist</span> || options.<span class="property">author</span> || <span class="string">&#x27;Audio artist&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: options.<span class="property">url</span>,</span><br><span class="line">        <span class="attr">cover</span>: options.<span class="property">cover</span> || options.<span class="property">pic</span>,</span><br><span class="line">        <span class="attr">lrc</span>: options.<span class="property">lrc</span> || options.<span class="property">lyric</span> || <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">        <span class="attr">type</span>: options.<span class="property">type</span> || <span class="string">&#x27;auto&#x27;</span>,</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        result = <span class="keyword">await</span> <span class="title function_">addCoverColor</span>(res)</span><br><span class="line">      &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// // 1. 通过 meta 拼凑接口参数获得完整接口 （_init 中存放的默认 api）</span></span><br><span class="line">    <span class="comment">// // 2. 请求接口，得到播放列表数据</span></span><br><span class="line">    <span class="comment">// // 3. 加载 APlayer</span></span><br><span class="line">    <span class="keyword">let</span> url = api</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:server&#x27;</span>, options.<span class="property">server</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:type&#x27;</span>, options.<span class="property">type</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:id&#x27;</span>, options.<span class="property">id</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:auth&#x27;</span>, options.<span class="property">auth</span>)</span><br><span class="line">      .<span class="title function_">replace</span>(<span class="string">&#x27;:r&#x27;</span>, <span class="title class_">Math</span>.<span class="title function_">random</span>())</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> r = <span class="keyword">await</span> <span class="title function_">fetch</span>(url)</span><br><span class="line">    <span class="keyword">const</span> res = <span class="keyword">await</span> r.<span class="title function_">json</span>()</span><br><span class="line"></span><br><span class="line">    result = res</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> <span class="title function_">addCoverColor</span>(result)</span><br><span class="line">  &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="提取封面颜色值"><a href="#提取封面颜色值" class="headerlink" title="提取封面颜色值"></a>提取封面颜色值</h2><p>为播放器样式自适应准备的东西。</p>
<h3 id="根据图片获取平均色值"><a href="#根据图片获取平均色值" class="headerlink" title="根据图片获取平均色值"></a>根据图片获取平均色值</h3><p>使用canvas计算图片的rgb色值</p>
<p>获取网络图片应该是个异步的操作，所以返回一个Promise。</p>
<p>QQ音乐源的封面出现了跨域问题，如果有大佬知道怎么解决请务必教导我（网易云源一切正常）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 计算专辑图片的平均色值（rgb）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// js创建一个canvas元素</span></span><br><span class="line"><span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;canvas&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 表示绘制一个2d图</span></span><br><span class="line"><span class="keyword">const</span> context = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>,&#123;<span class="attr">willReadFrequently</span>:<span class="literal">true</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (src) =&gt; &#123;</span><br><span class="line">  <span class="comment">// 创建图片元素用来加载图片地址        </span></span><br><span class="line">  <span class="keyword">const</span> img = <span class="keyword">new</span> <span class="title class_">Image</span>()</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将图片地址传给nimg</span></span><br><span class="line">  img.<span class="property">src</span> = src</span><br><span class="line">  img.<span class="property">crossOrigin</span> = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      img.<span class="property">onload</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取图片的大小</span></span><br><span class="line">        <span class="keyword">const</span> width = img.<span class="property">width</span></span><br><span class="line">        <span class="keyword">const</span> height = img.<span class="property">height</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置canvas的大小</span></span><br><span class="line">        canvas.<span class="property">width</span> = width</span><br><span class="line">        canvas.<span class="property">height</span> = height</span><br><span class="line"></span><br><span class="line">        <span class="comment">// rgba值</span></span><br><span class="line">        <span class="keyword">let</span> r = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> g = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> b = <span class="number">0</span></span><br><span class="line">        <span class="keyword">let</span> a = <span class="number">0</span></span><br><span class="line">        <span class="keyword">const</span> fxs = width * height</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 设置要绘制的图片</span></span><br><span class="line">        context.<span class="title function_">drawImage</span>(img, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取图片的像素信息，并.data获得数组</span></span><br><span class="line">        <span class="keyword">const</span> data = context.<span class="title function_">getImageData</span>(<span class="number">0</span>, <span class="number">0</span>, width, height).<span class="property">data</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获取所有的rgba的和</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; data.<span class="property">length</span> / <span class="number">4</span>; i++) &#123;</span><br><span class="line">          r += data[i * <span class="number">4</span>]</span><br><span class="line">          g += data[i * <span class="number">4</span> + <span class="number">1</span>]</span><br><span class="line">          b += data[i * <span class="number">4</span> + <span class="number">2</span>]</span><br><span class="line">          a += data[i * <span class="number">4</span> + <span class="number">3</span>]</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 获得平均值</span></span><br><span class="line">        <span class="keyword">const</span> rgba = [<span class="built_in">parseInt</span>(r / fxs), <span class="built_in">parseInt</span>(g / fxs), <span class="built_in">parseInt</span>(b / fxs), <span class="built_in">parseInt</span>(a / fxs)]</span><br><span class="line">        <span class="title function_">resolve</span>(rgba)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; <span class="keyword">catch</span>(e) &#123;</span><br><span class="line">    <span class="keyword">throw</span> e</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="rgb颜色转hsl颜色"><a href="#rgb颜色转hsl颜色" class="headerlink" title="rgb颜色转hsl颜色"></a>rgb颜色转hsl颜色</h3><p>转换成hsl颜色而不适用rgb是因为hsl颜色的计算更符合人类的大脑（</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 将rgb颜色转换成hsl颜色（方便人类计算）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (r, g, b) =&gt; &#123;</span><br><span class="line">  r /= <span class="number">255</span>, g /= <span class="number">255</span>, b /= <span class="number">255</span></span><br><span class="line">  <span class="keyword">let</span> max = <span class="title class_">Math</span>.<span class="title function_">max</span>(r, g, b), min = <span class="title class_">Math</span>.<span class="title function_">min</span>(r, g, b)</span><br><span class="line">  <span class="keyword">let</span> h, s, l = (max + min) / <span class="number">2</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (max == min) &#123;</span><br><span class="line">    h = s = <span class="number">0</span> <span class="comment">// achromatic</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> d = max - min</span><br><span class="line">    s = l &gt; <span class="number">0.5</span> ? d / (<span class="number">2</span> - max - min) : d / (max + min)</span><br><span class="line">    <span class="keyword">switch</span> (max) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="attr">r</span>: h = (g - b) / d + (g &lt; b ? <span class="number">6</span> : <span class="number">0</span>); <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="attr">g</span>: h = (b - r) / d + <span class="number">2</span>; <span class="keyword">break</span></span><br><span class="line">      <span class="keyword">case</span> <span class="attr">b</span>: h = (r - g) / d + <span class="number">4</span>; <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    h /= <span class="number">6</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> [h, s, l]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加颜色"><a href="#添加颜色" class="headerlink" title="添加颜色"></a>添加颜色</h3><p>在获取曲目列表时就顺便给每一个曲目加上一个颜色值。</p>
<p>加了缓存机制，避免重复计算（如果是网络获取音乐，不缓存的话，还要发很多请求）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 给歌曲加颜色值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> getColor <span class="keyword">from</span> <span class="string">&quot;../Tools/getColor.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> rgbToShl <span class="keyword">from</span> <span class="string">&quot;../Tools/rgbToHsl.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 缓存封面的颜色值</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">coverCacheMap</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">async</span> (audios) =&gt; &#123;</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; audios.<span class="property">length</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">const</span> cover = audios[i].<span class="property">cover</span> || audios[i].<span class="property">pic</span></span><br><span class="line">    <span class="keyword">if</span> (cover &amp;&amp; !audios[i].<span class="property">theme</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> cache = <span class="variable language_">window</span>.<span class="property">coverCacheMap</span>.<span class="title function_">get</span>(cover)</span><br><span class="line">      <span class="keyword">if</span> (cache) &#123;</span><br><span class="line">        audios[i].<span class="property">theme</span> = cache</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> rgba = <span class="keyword">await</span> <span class="title function_">getColor</span>(cover)</span><br><span class="line">        <span class="keyword">const</span> hsl = <span class="title function_">rgbToShl</span>(rgba[<span class="number">0</span>], rgba[<span class="number">1</span>], rgba[<span class="number">2</span>])</span><br><span class="line">        audios[i].<span class="property">theme</span> = hsl</span><br><span class="line">        <span class="comment">// 缓存颜色值</span></span><br><span class="line">        <span class="variable language_">window</span>.<span class="property">coverCacheMap</span>.<span class="title function_">set</span>(cover, hsl)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="白天-夜晚模式"><a href="#白天-夜晚模式" class="headerlink" title="白天&#x2F;夜晚模式"></a>白天&#x2F;夜晚模式</h2><p>添加了可供白天&#x2F;夜晚模式样式切换的方法。</p>
<p>一个小技巧，:root中定义的css变量可以通过js修改从而实现改变样式。这样就不用操作DOM的行内样式啦。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * musicBlock标签外挂 按钮的夜晚/白天样式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> ()=&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlEl = <span class="variable language_">document</span>.<span class="property">documentElement</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// let darkChange = mode===&quot;dark&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断夜晚模式</span></span><br><span class="line">  <span class="keyword">if</span> (htmlEl.<span class="property">dataset</span>.<span class="property">theme</span> !== <span class="string">&quot;dark&quot;</span>) &#123;</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-bg&quot;</span>, <span class="string">&quot;white&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-words&quot;</span>, <span class="string">&quot;black&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-shadow&quot;</span>, <span class="string">&quot;rgba(0,0,0,0.1)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-hover-shadow-1&quot;</span>, <span class="string">&quot;rgba(50,50,93,0.25)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-hover-shadow-2&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.4)&quot;</span>)</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-bg&quot;</span>, <span class="string">&quot;#444444&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-words&quot;</span>, <span class="string">&quot;white&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-shadow&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.1)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-hover-shadow-1&quot;</span>, <span class="string">&quot;rgba(50,50,93,0.25)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-item-hover-shadow-2&quot;</span>, <span class="string">&quot;rgba(255,255,255,0.4)&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="随时调用提示框"><a href="#随时调用提示框" class="headerlink" title="随时调用提示框"></a>随时调用提示框</h2><p>观察butterfly主题的源码后写的，所以应该只适用于butterfly（悲）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 随时使用snackbar</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (str) =&gt; &#123;</span><br><span class="line">  <span class="comment">// window.onload = () =&gt; &#123;</span></span><br><span class="line">  <span class="comment">// 使用提示框（如果有进行配置的话）</span></span><br><span class="line">  <span class="comment">// window.useSnackbar = (str) =&gt; &#123;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span>) &#123;</span><br><span class="line">    <span class="comment">// snackbar配置对象</span></span><br><span class="line">    <span class="keyword">const</span> snackbar = <span class="variable constant_">GLOBAL_CONFIG</span>.<span class="property">Snackbar</span></span><br><span class="line">    <span class="comment">// 页面的亮度模式</span></span><br><span class="line">    <span class="keyword">const</span> dark = <span class="variable language_">document</span>.<span class="property">documentElement</span>.<span class="title function_">getAttribute</span>(<span class="string">&#x27;data-theme&#x27;</span>)</span><br><span class="line">    <span class="keyword">let</span> bgc</span><br><span class="line">    <span class="keyword">if</span> (dark === <span class="string">&quot;light&quot;</span>) &#123;</span><br><span class="line">      bgc = snackbar.<span class="property">bgLight</span></span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (dark === <span class="string">&quot;dark&quot;</span>) &#123;</span><br><span class="line">      bgc = snackbar.<span class="property">bgDark</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">Snackbar</span>.<span class="title function_">show</span>(&#123;</span><br><span class="line">      <span class="attr">backgroundColor</span>: bgc,</span><br><span class="line">      <span class="attr">text</span>: str,</span><br><span class="line">      <span class="attr">actionText</span>: <span class="literal">null</span>,</span><br><span class="line">      <span class="attr">pos</span>: snackbar.<span class="property">position</span></span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="播放器配色自适应"><a href="#播放器配色自适应" class="headerlink" title="播放器配色自适应"></a>播放器配色自适应</h1><p>感觉Aplayer播放器的默认样式颜色太素了，不是很好看。</p>
<p>于是我查阅了<a href="https://aplayer.js.org/#/">APlayer文档</a>，配置项可以配置主题，那我试试看。</p>
<p>但是配置了后啥也没变啊？是我瞎了还是播放器坏了？</p>
<p>观察了114514次后才发现，原来配置后改变颜色的是这玩意……</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202305311235894.png"></p>
<p>那我自己去修改样式改变它的配色吧，要做就要做好点，直接按照封面自适应配色（</p>
<h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a>样式</h2><p>我就光写css不写styl了吧，styl实在写不习惯（不知道这里能不能写scss（写完编译一下不就行了x）。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">  <span class="attr">--bg-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>,<span class="number">100%</span>,<span class="number">100%</span>);</span><br><span class="line">  <span class="attr">--bg-color-choose</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">91%</span>);</span><br><span class="line">  <span class="attr">--scroll-bar-bg-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">93%</span>);</span><br><span class="line">  <span class="attr">--scroll-bar-bg-color-hover</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">50%</span>);</span><br><span class="line">  <span class="attr">--music-list-cur-color</span>: <span class="built_in">hsl</span>(<span class="number">204</span>, <span class="number">64%</span>, <span class="number">44%</span>);</span><br><span class="line">  <span class="attr">--music-words-color</span>: <span class="built_in">hsl</span>(<span class="number">15</span>, <span class="number">3%</span>, <span class="number">29%</span>);</span><br><span class="line">  <span class="attr">--music-words-color-lighter</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">40%</span>);</span><br><span class="line">  <span class="attr">--music-words-color-lightest</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">60%</span>);</span><br><span class="line">  <span class="attr">--music-icon-color-hover</span>: <span class="built_in">hsl</span>(<span class="number">120</span>, <span class="number">1%</span>, <span class="number">20%</span>);</span><br><span class="line">  <span class="attr">--music-player-bar</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">80%</span>);</span><br><span class="line">  <span class="attr">--music-player-bar-load</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">67%</span>);</span><br><span class="line">  <span class="attr">--music-player-bar-played</span>: <span class="built_in">hsl</span>(<span class="number">204</span>, <span class="number">64%</span>, <span class="number">44%</span>);</span><br><span class="line">  <span class="attr">--music-border-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">93%</span>);</span><br><span class="line">  <span class="attr">--music-console-border-color</span>: <span class="built_in">hsl</span>(<span class="number">0</span>, <span class="number">0%</span>, <span class="number">91%</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-list</span> &#123;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--music-border-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条本体 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span>::-webkit-scrollbar-thumb &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--scroll-bar-bg-color) <span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">transition</span>: <span class="number">0.2s</span> all ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 滚动条悬停 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span>::-webkit-scrollbar-thumb:hover &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--scroll-bar-bg-color-hover) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表项 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--music-border-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* 播放列表项首项 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:first</span>-child &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: none <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表项悬停 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color-choose) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 正在播放 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-class">.aplayer-list-light</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color-choose) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 正在播放指针 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span><span class="selector-class">.aplayer-list-light</span> <span class="selector-class">.aplayer-list-cur</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-list-cur-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表序号/艺人 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-index</span>,</span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-author</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--music-words-color-lighter) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 播放列表曲目标题 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-list</span> <span class="selector-tag">ol</span> <span class="selector-tag">li</span> <span class="selector-class">.aplayer-list-title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--music-words-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-body</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--bg-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台边框 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-info</span> &#123;</span><br><span class="line">  <span class="attribute">border-top</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--music-console-border-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台曲目标题 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> <span class="selector-class">.aplayer-title</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--music-words-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台艺人 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-music</span> <span class="selector-class">.aplayer-author</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--music-words-color-lighter) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台图标 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> <span class="selector-class">.aplayer-icon</span> path &#123;</span><br><span class="line">  fill: <span class="built_in">var</span>(--music-words-color-lighter) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台图标悬停 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> <span class="selector-class">.aplayer-icon</span><span class="selector-pseudo">:hover</span> path &#123;</span><br><span class="line">  fill: <span class="built_in">var</span>(--music-icon-color-hover) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台曲目时长 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-time</span> <span class="selector-class">.aplayer-time-inner</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">var</span>(--music-words-color-lightest) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台进度条 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台已加载进度条 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-loaded</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar-load);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台已播放进度条 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-played</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar-played);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台进度条控制点 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-bar-wrap</span> <span class="selector-class">.aplayer-bar</span> <span class="selector-class">.aplayer-played</span> <span class="selector-class">.aplayer-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar-played);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台音量条 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-volume-wrap</span> <span class="selector-class">.aplayer-volume-bar-wrap</span> <span class="selector-class">.aplayer-volume-bar</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar-load);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台音量高低条 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-info</span> <span class="selector-class">.aplayer-controller</span> <span class="selector-class">.aplayer-volume-wrap</span> <span class="selector-class">.aplayer-volume-bar-wrap</span> <span class="selector-class">.aplayer-volume-bar</span> <span class="selector-class">.aplayer-volume</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--music-player-bar-load);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台迷你模式开关 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span><span class="selector-class">.aplayer-fixed</span> <span class="selector-class">.aplayer-miniswitcher</span> &#123;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">var</span>(--scroll-bar-bg-color) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台图标 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-miniswitcher</span> <span class="selector-class">.aplayer-icon</span> path &#123;</span><br><span class="line">  fill: <span class="built_in">var</span>(--music-words-color-lighter) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/* 操作台图标悬停 */</span></span><br><span class="line"><span class="selector-class">.aplayer</span> <span class="selector-class">.aplayer-miniswitcher</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.aplayer-icon</span> path &#123;</span><br><span class="line">  fill: <span class="built_in">var</span>(--music-icon-color-hover) <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="配色方案生成"><a href="#配色方案生成" class="headerlink" title="配色方案生成"></a>配色方案生成</h2><p>添加一个根据色值自动生成配色的方法吧，兼容白天&#x2F;夜晚模式。</p>
<p>使用缓存和步进的方式减少运算量（太细致的颜色差别一般人也看不出来x）。</p>
<p>其实我觉得步进值还可以高一点，因为这样理论上最多需要缓存200个配色（虽然实际上应该刷不出这么多）。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> useSnackbar <span class="keyword">from</span> <span class="string">&quot;../Tools/useSnackbar.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 播放器颜色自适应</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 缓存当前的颜色</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">hueColors</span> = <span class="keyword">new</span> <span class="title class_">Map</span>()</span><br><span class="line"><span class="comment">// 当前使用的缓存key</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">nowHue</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> ap = <span class="variable language_">window</span>.<span class="property">fixedap</span></span><br><span class="line">  <span class="keyword">if</span> (ap) &#123;</span><br><span class="line">    <span class="comment">// 获取当前播放的样式</span></span><br><span class="line">    <span class="keyword">const</span> playList = ap.<span class="property">list</span></span><br><span class="line">    <span class="keyword">const</span> playIndex = playList.<span class="property">index</span></span><br><span class="line">    <span class="keyword">const</span> nowStyle = playList.<span class="property">audios</span>[playIndex].<span class="property">theme</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="title function_">changeStyle</span>(nowStyle)</span><br><span class="line">    &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">      <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve</span>)=&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          <span class="title function_">useSnackbar</span>(<span class="string">&quot;因不可抗力因素没得到封面颜色w(ﾟДﾟ)w，但至少不影响你收听啦.....((/- -)/&quot;</span>)</span><br><span class="line">          <span class="title function_">resolve</span>()</span><br><span class="line">        &#125;, <span class="number">3000</span>)</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">hslToStr</span> = (<span class="params">hsl</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`hsl(<span class="subst">$&#123;hsl[<span class="number">0</span>] * <span class="number">360</span>&#125;</span>,<span class="subst">$&#123;hsl[<span class="number">1</span>] * <span class="number">100</span>&#125;</span>%,<span class="subst">$&#123;hsl[<span class="number">2</span>] * <span class="number">100</span>&#125;</span>%)`</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> <span class="title function_">changeStyle</span> = (<span class="params">hsl</span>) =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> htmlEl = <span class="variable language_">document</span>.<span class="property">documentElement</span></span><br><span class="line">  <span class="keyword">const</span> mode = htmlEl.<span class="property">dataset</span>.<span class="property">theme</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> hue = hsl[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 每10为一个取色点，如果太黑了就直接gray</span></span><br><span class="line">  <span class="keyword">const</span> hueKey = <span class="title class_">Math</span>.<span class="title function_">round</span>(hue * <span class="number">100</span>) / <span class="number">100</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> keyName</span><br><span class="line">  <span class="keyword">if</span> (hsl[<span class="number">1</span>] &lt; <span class="number">0.05</span>) &#123;</span><br><span class="line">    keyName = <span class="string">&quot;gray&quot;</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    keyName = hueKey</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> darkChange = mode === <span class="string">&quot;dark&quot;</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 判断夜晚模式</span></span><br><span class="line">  <span class="keyword">if</span> (darkChange) &#123;</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-border-color&quot;</span>, <span class="string">&quot;hsl(0, 0%, 20%)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-console-border-color&quot;</span>, <span class="string">&quot;hsl(0, 0%, 40%)&quot;</span>)</span><br><span class="line"></span><br><span class="line">    keyName = mode + keyName</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-border-color&quot;</span>, <span class="string">&quot;hsl(0, 0%, 93%)&quot;</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-console-border-color&quot;</span>, <span class="string">&quot;hsl(0, 0%, 91%)&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 切换的key和上一首的key一样，那就不调整样式了</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="variable language_">window</span>.<span class="property">nowHue</span> === keyName) &#123;</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 从缓存中获取样式</span></span><br><span class="line">    <span class="keyword">let</span> colors = <span class="variable language_">window</span>.<span class="property">hueColors</span>.<span class="title function_">get</span>(keyName)</span><br><span class="line">    <span class="comment">// 缓存中没有样式，生成</span></span><br><span class="line">    <span class="keyword">if</span> (!colors) &#123;</span><br><span class="line">      <span class="comment">// 夜晚模式</span></span><br><span class="line">      <span class="keyword">if</span> (darkChange) &#123;</span><br><span class="line">        <span class="comment">// 灰色配色</span></span><br><span class="line">        <span class="keyword">if</span> (keyName === <span class="string">&quot;gray&quot;</span> || keyName === <span class="string">&quot;darkgray&quot;</span>) &#123;</span><br><span class="line">          colors = &#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>]),</span><br><span class="line">            <span class="attr">bgColorChoose</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColorHover</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>]),</span><br><span class="line">            <span class="attr">musicListCurColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicWordsColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLighter</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLightest</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.7</span>]),</span><br><span class="line">            <span class="attr">musicIconColorHover</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBar</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.75</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarLoad</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.9</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarPlayed</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.1</span>])</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 彩色配色</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          colors = &#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.3</span>, <span class="number">0.1</span>]),</span><br><span class="line">            <span class="attr">bgColorChoose</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.5</span>, <span class="number">0.2</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.25</span>, <span class="number">0.4</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColorHover</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.4</span>, <span class="number">0.5</span>]),</span><br><span class="line">            <span class="attr">musicListCurColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.9</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicWordsColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0</span>, <span class="number">1</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLighter</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.05</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLightest</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.05</span>, <span class="number">0.7</span>]),</span><br><span class="line">            <span class="attr">musicIconColorHover</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.01</span>, <span class="number">1</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBar</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.05</span>, <span class="number">0.75</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarLoad</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.05</span>, <span class="number">0.9</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarPlayed</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">1</span>, <span class="number">0.44</span>])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 白天模式</span></span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// 灰色配色</span></span><br><span class="line">        <span class="keyword">if</span> (keyName === <span class="string">&quot;gray&quot;</span>) &#123;</span><br><span class="line">          colors = &#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.99</span>]),</span><br><span class="line">            <span class="attr">bgColorChoose</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.95</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.9</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColorHover</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicListCurColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicWordsColor</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0.</span>, <span class="number">0.29</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLighter</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLightest</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicIconColorHover</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBar</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarLoad</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.67</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarPlayed</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.44</span>])</span><br><span class="line">          &#125;</span><br><span class="line"></span><br><span class="line">          <span class="comment">// 彩色配色</span></span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          colors = &#123;</span><br><span class="line">            <span class="attr">bgColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">1</span>, <span class="number">0.99</span>]),</span><br><span class="line">            <span class="attr">bgColorChoose</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.5</span>, <span class="number">0.95</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.4</span>, <span class="number">0.9</span>]),</span><br><span class="line">            <span class="attr">scrollBarBgColorHover</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.25</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicListCurColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.9</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicWordsColor</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.03</span>, <span class="number">0.29</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLighter</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.4</span>]),</span><br><span class="line">            <span class="attr">musicWordsColorLightest</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>]),</span><br><span class="line">            <span class="attr">musicIconColorHover</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.01</span>, <span class="number">0.2</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBar</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.8</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarLoad</span>: <span class="title function_">hslToStr</span>([<span class="number">0</span>, <span class="number">0</span>, <span class="number">0.67</span>]),</span><br><span class="line">            <span class="attr">musicPlayerBarPlayed</span>: <span class="title function_">hslToStr</span>([hueKey, <span class="number">0.64</span>, <span class="number">0.44</span>])</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">// 把新颜色值存入缓存</span></span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">hueColors</span>.<span class="title function_">set</span>(keyName, colors)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 更改css变量从而改变配色</span></span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--bg-color&quot;</span>, colors.<span class="property">bgColor</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--bg-color-choose&quot;</span>, colors.<span class="property">bgColorChoose</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--scroll-bar-bg-color&quot;</span>, colors.<span class="property">scrollBarBgColor</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--scroll-bar-bg-color-hover&quot;</span>, colors.<span class="property">scrollBarBgColorHover</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-list-cur-color&quot;</span>, colors.<span class="property">musicListCurColor</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-words-color&quot;</span>, colors.<span class="property">musicWordsColor</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-words-color-lighter&quot;</span>, colors.<span class="property">musicWordsColorLighter</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-words-color-lightest&quot;</span>, colors.<span class="property">musicWordsColorLightest</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-icon-color-hover&quot;</span>, colors.<span class="property">musicIconColorHover</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-player-bar&quot;</span>, colors.<span class="property">musicPlayerBar</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-player-bar-load&quot;</span>, colors.<span class="property">musicPlayerBarLoad</span>)</span><br><span class="line">    htmlEl.<span class="property">style</span>.<span class="title function_">setProperty</span>(<span class="string">&quot;--music-player-bar-played&quot;</span>, colors.<span class="property">musicPlayerBarPlayed</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 某几个DOM被设了行内样式，所以这么改</span></span><br><span class="line">    <span class="keyword">const</span> apDOM = <span class="variable language_">window</span>.<span class="property">fixedap</span>.<span class="property">container</span></span><br><span class="line">    <span class="keyword">const</span> dot = apDOM.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-thumb&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> bar = apDOM.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-played&quot;</span>)</span><br><span class="line">    <span class="keyword">const</span> vol = apDOM.<span class="title function_">querySelector</span>(<span class="string">&quot;.aplayer-volume&quot;</span>)</span><br><span class="line">    dot.<span class="property">style</span>.<span class="property">backgroundColor</span> = colors.<span class="property">musicPlayerBarPlayed</span></span><br><span class="line">    bar.<span class="property">style</span>.<span class="property">backgroundColor</span> = colors.<span class="property">musicPlayerBarPlayed</span></span><br><span class="line">    vol.<span class="property">style</span>.<span class="property">backgroundColor</span> = colors.<span class="property">musicPlayerBarPlayed</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 保存当前使用key</span></span><br><span class="line">    <span class="variable language_">window</span>.<span class="property">nowHue</span> = keyName</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="添加事件"><a href="#添加事件" class="headerlink" title="添加事件"></a>添加事件</h2><p>调戏播放器的操作台好像也会触发canplay事件，其实我只希望切换播放时才触发，有没有更好的事件名？</p>
<p>另外感觉夜晚模式的那个按钮有点诡异，我点击后到底是先执行代码逻辑还是先改变data-theme啊。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 音乐切换时发起事件~</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> changeBlockStyle <span class="keyword">from</span> <span class="string">&quot;./changeBlockStyle.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> changePlayerStyle <span class="keyword">from</span> <span class="string">&quot;./changePlayerStyle.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> ap = <span class="variable language_">window</span>.<span class="property">fixedap</span></span><br><span class="line">  <span class="comment">// 更改播放时刷新样式</span></span><br><span class="line">  ap.<span class="title function_">on</span>(<span class="string">&quot;canplay&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="title function_">changePlayerStyle</span>()</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 点击夜晚模式按钮时刷新样式</span></span><br><span class="line">  <span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, <span class="function">(<span class="params">e</span>)=&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> target = e.<span class="property">target</span></span><br><span class="line">    <span class="keyword">const</span> btn = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;darkmode&quot;</span>)</span><br><span class="line">    <span class="keyword">if</span>(target === btn || target.<span class="property">parentNode</span> === btn) &#123;</span><br><span class="line">      <span class="title function_">changePlayerStyle</span>()</span><br><span class="line">      <span class="title function_">changeBlockStyle</span>()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="播放器实例问题"><a href="#播放器实例问题" class="headerlink" title="播放器实例问题"></a>播放器实例问题</h1><p>找到了解决方法，直接在开启应用（Window.onload）时就读取播放器实例然后存在全局window中。</p>
<p>亲测除了刷新否则不会丢，这样就可以随时操作该实例，不用每次都创建了（创建新实例还容易出bug）。</p>
<p>顺便把其他需要初始化的东西也丢进去。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> changePlay <span class="keyword">from</span> <span class="string">&quot;./changePlay.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> addCoverColor <span class="keyword">from</span> <span class="string">&quot;./addCoverColor.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> changePlayerStyle <span class="keyword">from</span> <span class="string">&quot;./changePlayerStyle.js&quot;</span></span><br><span class="line"><span class="keyword">import</span> changeBlockStyle <span class="keyword">from</span> <span class="string">&quot;./changeBlockStyle.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 保存所有aplayer实例到全局上（butterfly本身为什么切换页面就失去window.aplayers了？）</span></span><br><span class="line"><span class="variable language_">window</span>.<span class="property">onload</span> = <span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">  <span class="keyword">const</span> aps = <span class="variable language_">window</span>.<span class="property">aplayers</span></span><br><span class="line">  <span class="comment">// 获得全局吸底aplayer（有fixed配置的那个）</span></span><br><span class="line">  aps.<span class="title function_">some</span>(<span class="function"><span class="params">a</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (a.<span class="property">options</span>.<span class="property">fixed</span>) &#123;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="property">fixedap</span> = a</span><br><span class="line">      <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 我不知道aplayer播放器有没有列表生成完毕的事件，所以先干脆直接上轮询（</span></span><br><span class="line">  <span class="keyword">let</span> timer = <span class="built_in">setInterval</span>(<span class="keyword">async</span> () =&gt; &#123;</span><br><span class="line">    <span class="comment">// 为初始播放列表增加配色</span></span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">fixedap</span>.<span class="property">list</span>?.<span class="property">audios</span>?.<span class="property">length</span>&gt;<span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">await</span> <span class="title function_">addCoverColor</span>(<span class="variable language_">window</span>.<span class="property">fixedap</span>.<span class="property">list</span>.<span class="property">audios</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 初始化播放器样式</span></span><br><span class="line">      <span class="title function_">changePlayerStyle</span>()   </span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 绑定使播放器样式变化的事件</span></span><br><span class="line">      <span class="title function_">changePlay</span>()</span><br><span class="line"></span><br><span class="line">      <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,<span class="number">500</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 初始化音乐卡样式</span></span><br><span class="line">  <span class="title function_">changeBlockStyle</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="碎碎念"><a href="#碎碎念" class="headerlink" title="碎碎念"></a>碎碎念</h1><p>能保存播放器实例后玩得舒服多了。</p>
<p>但是好像因为服务端的设置，我无法获取QQ源封面的平均颜色，如果哪位大佬有解决方法请狠狠地教导我orz。</p>
<p>有时间的话想把获取音乐的接口换一下，要不用<a href="https://neteasecloudmusicapi.js.org/#/">网易云音乐API</a>&#x2F;<a href="https://jsososo.github.io/QQMusicApi/#/?id=qq-%E9%9F%B3%E4%B9%90-api">QQ音乐API</a>自己造一个接口？</p>
<p>如果可以的话我甚至还想在网站背景加个音乐可视化（错乱）</p>
]]></content>
      <categories>
        <category>前端</category>
        <category>DIY</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>hexo</tag>
        <tag>音乐</tag>
        <tag>DIY</tag>
      </tags>
  </entry>
  <entry>
    <title>可视化音频背景</title>
    <url>/web/diy/3.%E5%8F%AF%E8%A7%86%E5%8C%96%E9%9F%B3%E9%A2%91%E8%83%8C%E6%99%AF.html</url>
    <content><![CDATA[<p>书又接上文，感觉逼格不够大，所以鼓捣了个音频可视化</p>
<h1 id="Web-Audio-API"><a href="#Web-Audio-API" class="headerlink" title="Web Audio API"></a>Web Audio API</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API">Web Audio API</a>可以获取音频的包括频率、波形的信息，能用于选频、加特效、做可视化、添加空间效果等，就像是音频版的canvas</p>
<p>MDN网站已经给出<a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Web_Audio_API/Visualizations_with_Web_Audio_API">音频可视化案例</a>了，我只需魔改一下就行了</p>
<h1 id="编码"><a href="#编码" class="headerlink" title="编码"></a>编码</h1><p>在MDN的案例基础上加了点自己的个性化需求</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> debounce <span class="keyword">from</span> <span class="string">&quot;../Tools/debounce.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> (canvas, audio) =&gt; &#123;</span><br><span class="line">    </span><br><span class="line">  <span class="comment">// 快速傅立叶变换（Fast Fourier Transform），一定要是2的倍数，默认为2048</span></span><br><span class="line">  <span class="keyword">const</span> <span class="variable constant_">FFT</span> = <span class="number">512</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 实例化AudioContext音频上下文对象</span></span><br><span class="line">  <span class="keyword">const</span> audioCtx = <span class="keyword">new</span> (<span class="variable language_">window</span>.<span class="property">AudioContext</span> || <span class="variable language_">window</span>.<span class="property">webkitAudioContext</span>)()</span><br><span class="line">  <span class="comment">// 创建AnalyserNode节点</span></span><br><span class="line">  <span class="keyword">const</span> analyser = audioCtx.<span class="title function_">createAnalyser</span>()</span><br><span class="line">  <span class="comment">// 让fft变小可以使每个频率条有一定宽度</span></span><br><span class="line">  analyser.<span class="property">fftSize</span> = <span class="variable constant_">FFT</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 将AnalyserNode节点和声源连接</span></span><br><span class="line">  <span class="comment">// 从audio中获取声音源文件</span></span><br><span class="line">  <span class="keyword">const</span> audioSrc = audioCtx.<span class="title function_">createMediaElementSource</span>(audio)</span><br><span class="line">  audioSrc.<span class="title function_">connect</span>(analyser)</span><br><span class="line">  analyser.<span class="title function_">connect</span>(audioCtx.<span class="property">destination</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// AnalyserNode数据解析，获得瞬时音频数据</span></span><br><span class="line">  <span class="keyword">const</span> bufferLength = analyser.<span class="property">frequencyBinCount</span></span><br><span class="line">  <span class="keyword">const</span> dataArray = <span class="keyword">new</span> <span class="title class_">Uint8Array</span>(bufferLength)</span><br><span class="line">  analyser.<span class="title function_">getByteFrequencyData</span>(dataArray)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// -------------------------------------</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">// 画布大小响应（因为要铺满整个背景）</span></span><br><span class="line">  <span class="keyword">const</span> <span class="title function_">canvasResize</span> = (<span class="params"></span>)=&gt; &#123;</span><br><span class="line">    canvas.<span class="property">width</span> = <span class="variable language_">window</span>.<span class="property">innerWidth</span></span><br><span class="line">    canvas.<span class="property">height</span> = <span class="variable language_">window</span>.<span class="property">innerHeight</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="title function_">canvasResize</span>()</span><br><span class="line">  <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;resize&quot;</span>, <span class="title function_">debounce</span>(canvasResize,<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (canvas.<span class="property">getContext</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> ctx = canvas.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>)</span><br><span class="line">    </span><br><span class="line">    ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 开画</span></span><br><span class="line">    <span class="keyword">const</span> <span class="title function_">draw</span> = (<span class="params"></span>) =&gt; &#123;</span><br><span class="line">      <span class="comment">// 动画帧</span></span><br><span class="line">      <span class="title function_">requestAnimationFrame</span>(draw)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 获取该帧的音频信息</span></span><br><span class="line">      analyser.<span class="title function_">getByteFrequencyData</span>(dataArray)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 每一帧都要先清空画布，不然旧内容会保留</span></span><br><span class="line">      ctx.<span class="title function_">clearRect</span>(<span class="number">0</span>, <span class="number">0</span>, canvas.<span class="property">width</span>, canvas.<span class="property">height</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 设置条的宽高</span></span><br><span class="line">      <span class="keyword">const</span> barWidth = (canvas.<span class="property">width</span> / bufferLength)</span><br><span class="line">      <span class="keyword">let</span> barHeight</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 记录条当前位置</span></span><br><span class="line">      <span class="keyword">let</span> x = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">      <span class="comment">// 遍历每一条（每一个音频信息）</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; bufferLength; i++) &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 给条高赋值</span></span><br><span class="line">        barHeight = ((dataArray[i] * <span class="number">3</span>) / (<span class="variable constant_">FFT</span>)) * canvas.<span class="property">height</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 给条上喜欢的颜色，因为我是人类所以使用hsl颜色</span></span><br><span class="line">        ctx.<span class="property">fillStyle</span> = <span class="string">`hsl(<span class="subst">$&#123;<span class="number">120</span> + (x / canvas.width) * <span class="number">120</span>&#125;</span>,<span class="subst">$&#123;<span class="number">10</span> + (barHeight / canvas.height) * <span class="number">90</span>&#125;</span>%,60%)`</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 将条绘制到画布伤</span></span><br><span class="line">        ctx.<span class="title function_">fillRect</span>(x, canvas.<span class="property">height</span> - barHeight / <span class="number">2</span>, barWidth, barHeight)</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 每个条之间留个间距</span></span><br><span class="line">        x += barWidth + <span class="number">3</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="title function_">draw</span>()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后是笨办法之轮询等播放器初始化（</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> makeVisual <span class="keyword">from</span> <span class="string">&quot;./makeVisual.js&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;load&quot;</span>, <span class="function">()=&gt;</span> &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> timer = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(<span class="variable language_">window</span>.<span class="property">fixedap</span>) &#123;</span><br><span class="line">      <span class="keyword">const</span> audio = <span class="variable language_">window</span>.<span class="property">fixedap</span>.<span class="property">audio</span></span><br><span class="line">      <span class="keyword">const</span> canvas = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;music-visualization&quot;</span>)</span><br><span class="line">      </span><br><span class="line">      <span class="comment">// 浏览器策略不准自动播放音频，总之音频解析行为必须放在用户确认之后</span></span><br><span class="line">      <span class="keyword">const</span> <span class="title function_">canplay</span> = (<span class="params"></span>)=&gt; &#123;</span><br><span class="line">        <span class="title function_">makeVisual</span>(canvas,audio)</span><br><span class="line">        <span class="variable language_">window</span>.<span class="title function_">removeEventListener</span>(<span class="string">&quot;click&quot;</span>, canplay)</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;click&quot;</span>, canplay)</span><br><span class="line">      <span class="built_in">clearInterval</span>(timer)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;, <span class="number">500</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>在Meting.js中的恰当位置加一句，否则不能跨域获取音频信息</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">aplayers.<span class="title function_">forEach</span>(<span class="function"><span class="params">ap</span>=&gt;</span> &#123;ap.<span class="property">audio</span>.<span class="property">crossOrigin</span>=<span class="string">&quot;anonymous&quot;</span>&#125;)</span><br></pre></td></tr></table></figure>

<p>最后就是把canvas标签加进butterfly inject配置项</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">inject:</span></span><br><span class="line">  <span class="attr">head:</span></span><br><span class="line">    <span class="comment"># ......省略</span></span><br><span class="line">    <span class="string">&lt;canvas</span> <span class="string">id=&quot;music-visualization&quot;</span> <span class="string">style=&quot;position:fixed;z-index:-900&quot;&gt;&lt;/canvas&gt;</span></span><br></pre></td></tr></table></figure>

<p>为了让可视化效果更好看，我顺便把原本页面上纯色的内容块改成了半透明，感觉还不错~</p>
<p><img src= "/img/loading.gif" data-lazy-src="https://image.cheriko.fun/post/202309071817861.png"></p>
]]></content>
      <categories>
        <category>前端</category>
        <category>DIY</category>
      </categories>
      <tags>
        <tag>前端</tag>
        <tag>hexo</tag>
        <tag>音乐</tag>
        <tag>DIY</tag>
      </tags>
  </entry>
  <entry>
    <title>简评《格调》</title>
    <url>/evaluate/books/%E7%AE%80%E8%AF%84%E3%80%8A%E6%A0%BC%E8%B0%83%E3%80%8B.html</url>
    <content><![CDATA[<h1 id="梗概"><a href="#梗概" class="headerlink" title="梗概"></a>梗概</h1><p>副标题：社会等级与生活品味</p>
<p>有人的地方就有江湖，至少以目前的社会先进程度而言，还没到能撼动阶级体系的程度，所以无论你信不信服，即使法律白纸黑字地写着“人生而平等”，阶级仍然存在。</p>
<p>如果以财富占有情况来划分，阶级会被分成富人（有产者）和穷人（无产者）。但如果不谈财富，找一找另一种评价尺度，就会发现，生活趣味（格调）更能用于归纳人所处阶级的普遍生活情况，以格调这一尺度分层，能将阶级分为三大类，若干小类：</p>
<ul>
<li>上层阶级<ul>
<li>看不见的顶层</li>
<li>上层阶级</li>
<li>中上层阶级</li>
</ul>
</li>
<li>中层阶级<ul>
<li>中产阶级</li>
<li>上层贫民</li>
<li>中层贫民</li>
<li>下层贫民</li>
</ul>
</li>
<li>下层阶级<ul>
<li>赤贫阶层</li>
<li>看不见的底层</li>
</ul>
</li>
</ul>
<p>格调几乎是人出生时就受到的烙印，它深深影响你的行为准则、审美偏好。拥有相似习惯的人往往更能聚到一起，因此，格调才更是决定阶级的决定性因素。占有情况通常能反映阶级，但不一定总能反映，比如一个贫民出身的暴发户，他即使变得再有钱，也几乎无法真正的挤进上流社会。</p>
<p>书中从非常多的角度，揭示了这些常见的日常生活场景中，各个阶层通常的表现。总而言之，多数群体都有着自己的困境和缺陷，尤其体现为中下层人士（特别是中产阶级，中产阶级可以说是书中描写最多的群体）因欲望和嫉妒作祟，总是想挤破头地提升阶级，于是开始扮演假想的上层阶级的模样。总之，许多人深陷阶级的泥潭中，即使他们本人不一定会意识到这一点。</p>
<p>如果想要脱离这一阶级泥潭，作者给出了一个方向：成为一个异类。异类并非先天是异类，他们一般是通过学习和思考，最终决定成为异类的。他们的天赋、才干和学识通常能支撑他们成为是自由职业者或艺术家（脱离了传统的雇佣关系），并在日常生活中顺从本心，达到了从心所欲不逾矩的状态。</p>
<h1 id="简评"><a href="#简评" class="headerlink" title="简评"></a>简评</h1><p>本书的表达（只指中译本，原文我不太清楚）清晰易懂<del>我这种文盲也能无压力阅读</del>，使用幽默且锐利的语言就为冒犯每一个群体。如果你是幽默爱好者，可以期待它带来的捧腹大笑；如果你不太喜欢开玩笑，可以选择不看。</p>
<p>阶级问题一定是一个大问题，但本书深入浅出：用讲现象的方式含沙射影。作者通过统计观察，使用贴标签的形式制造群体画像，让你在阅读过程中，时不时感觉”膝盖中了一箭“，时不时又让你想”清算“一下身边的人，代入感很强。原来，这本书描述的几十年前的美国现象，在如今的拆那也能找到极其相似的版本。</p>
<p>它作为一个描述现象的书，可能并没有非常多的深入讨论（因为这样分析每一个现象会导致篇幅非常多？），但这些现象都很有意思，可以把它们作为切入点，进行后续的思考。</p>
<p>需要注意的是，tag是较为静态的，实际情况可能会因时间的推移而改变，这些tag只能概括作者写作时期的社会状况，不一定能全盘对应现在的美国或拆那。同时群体的tag不能决断性地等同于个人，人和人的差距比群体和群体的差距大。但即使部分现象归纳出现过时，只要阶级仍然存在，就仍然可以借鉴本书的内容主旨。</p>
]]></content>
      <categories>
        <category>评论</category>
      </categories>
      <tags>
        <tag>评论</tag>
        <tag>书籍</tag>
        <tag>简评</tag>
      </tags>
  </entry>
</search>
